<view><block wx:for="{{appointments}}" wx:for-item="appointment" wx:for-index="i" wx:key="i"><view class="appointment-card" style="{{(appointment.status!=='待处理'?'background: #dedede;':'')}}"><view><text style="font-weight:bold;">{{'预约医生：'+appointment.doctorName+' '+appointment.position}}</text><text>{{'\n预约科室：'+appointment.departmentName+'\n'}}</text><text style="font-size:14px;" user-select="true">{{'预约时间：'+appointment.appointmentTime+' '+appointment.appointmentTimeSlot}}</text><text style="color:gray;">
就诊人：</text><text style="font-size:13px;">{{appointment.patientName}}</text><text style="font-size:13px;">{{'\n联系电话'+appointment.patientPhone}}</text></view><view class="line" style="height:1rpx;background-color:#ccc;margin-top:5px;"></view><view style="display:flex;margin-top:5px;"><view class="left-box"><image style="width:20vw;height:20vw;border-radius:10px;" src="{{appointment.hospitalImgId?'http://images.yndzyf.com/getimage.ashx?mlszh='+appointment.hospitalImgId:defaultPic}}" mode="aspectFit"></image></view><view class="right-box"><view><text style="font-weight:bold;">{{appointment.hospitalName}}</text></view><view style="display:flex;"><view style="display:flex;align-items:center;"><image style="width:16px;height:16px;" src="../../static/icon/location.svg"></image></view><view data-event-opts="{{[['tap',[['toLocation',['$0','$1','$2'],[[['appointments','',i,'longitude']],[['appointments','',i,'latitude']],[['appointments','',i,'hospitalName']]]]]]]}}" class="location-box" bindtap="__e"><text style="color:gray;">{{appointment.location}}</text></view></view></view></view><view><block wx:if="{{appointment.status=='已取消'}}"><text style="color:crimson;">已取消</text></block><block wx:if="{{appointment.status=='已完成'}}"><text style="color:darkgreen;">已完成</text></block><block wx:if="{{appointment.status=='已过期'}}"><text style="color:gray;">已过期</text></block></view><view class="line" style="height:1rpx;background-color:#ccc;margin-top:5px;"></view><view style="display:flex;justify-content:flex-end;padding:5px;"><block wx:if="{{appointment.status=='待处理'}}"><button class="mini-btn" style="margin:initial;border-radius:50px;" type="warn" size="mini" data-event-opts="{{[['tap',[['cancelAppointment',['$0'],[[['appointments','',i]]]]]]]}}" bindtap="__e">取消预约</button></block></view></view></block></view>
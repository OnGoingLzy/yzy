(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackage_appointment/doctor_queryAppointment/doctor_queryAppointment"],{"0b33":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),i=o(n("c973")),r=o(n("24db")),s={data:function(){return{appointments:[],filterAppointments:[],showMore:"查看更多"}},onShow:function(){t.hideHomeButton(),this.checkUserPermissions()},methods:{toAuthorizePhone:function(){t.navigateTo({url:"/pages/login/login"})},appointmentFinished:function(e){var n=this;return(0,i.default)(a.default.mark((function o(){var i,s,c;return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone"),type:"医生",appointmentId:e.id,origin_status:e.status,status:"已完成"},"/api/appointment/updateAppointmentStatus","POST",s=i,o.prev=4,o.next=7,(0,r.default)("yzy_app","/api/appointment/updateAppointmentStatus","POST",s);case 7:c=o.sent,console.log(c),99==c.data.flag?(t.showToast({title:"确认成功!",icon:"none",mask:!0,duration:1300}),n.getAppointment()):t.showToast({title:c.data.sm,icon:"none",mask:!0,duration:1300}),o.next=16;break;case 12:o.prev=12,o.t0=o["catch"](4),console.log(o.t0),t.showToast({title:"出错了",icon:"none",mask:!0,duration:1300});case 16:case"end":return o.stop()}}),o,null,[[4,12]])})))()},clickShowMore:function(){"查看更多"==this.showMore?(this.showMore="收起",this.filterData("ALL")):(this.showMore="查看更多",this.filterData("DEFAULT"))},filterData:function(t){"ALL"==t&&(this.filterAppointments=this.appointments),"DEFAULT"==t&&(this.filterAppointments=this.appointments.filter((function(t){return"待处理"===t.status})),console.log(this.filterAppointments),0==this.filterAppointments.length&&(this.filterAppointments=this.appointments))},getAppointment:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var o,i,s,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showMore="查看更多",o=e,i={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone"),type:"医生"},"/api/appointment/getAppointment","POST",s=i,n.prev=6,n.next=9,(0,r.default)("yzy_app","/api/appointment/getAppointment","POST",s);case 9:c=n.sent,console.log(c),99==c.data.flag&&(e.appointments=c.data.data,o.filterData("DEFAULT")),n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](6),console.log(n.t0),t.hideLoading();case 18:case"end":return n.stop()}}),n,null,[[6,14]])})))()},checkUserPermissions:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var o,i,s;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.getStorageSync("phone")){n.next=3;break}return e.toAuthorizePhone(),n.abrupt("return");case 3:return o={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone")},"/api/appointment/checkUserPermissions","POST",i=o,n.prev=7,n.next=10,(0,r.default)("yzy_app","/api/appointment/checkUserPermissions","POST",i);case 10:s=n.sent,console.log(s),99==s.data.flag?e.getAppointment():(t.showToast({title:"您没有医生权限,准备跳转云找药",icon:"none"}),setTimeout((function(){t.reLaunch({url:"/pages/index/index"})}),1e3)),n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](7),console.log(n.t0),t.hideLoading();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()}}};e.default=s}).call(this,n("543d")["default"])},"4c97":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},a=[]},6118:function(t,e,n){"use strict";n.r(e);var o=n("0b33"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},a881:function(t,e,n){"use strict";var o=n("d0e8"),a=n.n(o);a.a},bf1c:function(t,e,n){"use strict";n.r(e);var o=n("4c97"),a=n("6118");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("a881");var r=n("f0c5"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=s.exports},d0e8:function(t,e,n){},e562:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("7711");o(n("66fd"));var a=o(n("bf1c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["e562","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_user/goods_user"],{"11c2":function(e,t,n){"use strict";n.r(t);var o=n("bbfa"),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},4140:function(e,t,n){},4628:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("7711");o(n("66fd"));var r=o(n("921e"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"7e14":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uniTag:function(){return n.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(n.bind(null,"ccec"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"0336"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.goodsUser,(function(t,n){var o=e.__get_orig(t),r=e.calculateAge(t.birthday);return{$orig:o,m0:r}}))),o=null==e.goodsUser||0==e.goodsUser.length;e.$mp.data=Object.assign({},{$root:{l0:n,g0:o}})},a=[]},"921e":function(e,t,n){"use strict";n.r(t);var o=n("7e14"),r=n("11c2");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("afce");var s=n("f0c5"),i=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=i.exports},afce:function(e,t,n){"use strict";var o=n("4140"),r=n.n(o);r.a},bbfa:function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("2eee")),a=o(n("c973")),s=o(n("24db")),i={name:"user-id-card-verify",components:{addGoodsUser:function(){n.e("components/user/add_goods_user").then(function(){return resolve(n("0d3d"))}.bind(null,n)).catch(n.oe)}},data:function(){return{index:0,frontImage:null,backImage:null,popup:!0,popupidverify:!0,msg:"",authObj:{goodsUserName:"",idCard:"",phone:"",relationship:"",sex:"",openid:e.getStorageSync("openid")},goodsUser:[],isEnableClick:!0,choiceObj:null,backToConsultationDirectly:null}},mounted:function(){this.getGoodsUser()},onLoad:function(e){"true"==e.openAddUser&&(this.showAddFrame(),this.backToConsultationDirectly=!0)},onUnload:function(){e.$emit("pageClosed","Success")},methods:{fatherMethods:function(e){console.log("父组件方法",e),this.addOver(e)},addOver:function(t){this.getGoodsUser(),this.$refs.popup.close(),!0===this.backToConsultationDirectly&&e.navigateBack()},getGoodsUser:function(){var t=this;return(0,a.default)(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return"/api/user/getGoodsUser","POST",o={openid:e.getStorageSync("openid"),phone:e.getStorageSync("phone")},n.prev=3,n.next=6,(0,s.default)("yzy_app","/api/user/getGoodsUser","POST",o);case 6:a=n.sent,console.log(a),99==a.code&&(t.goodsUser=a.data.data,null!=t.goodsUser&&t.goodsUser.sort((function(e,t){return"本人"===e.relationship&&"本人"!==t.relationship?-1:"本人"!==e.relationship&&"本人"===t.relationship?1:"本人"===e.relationship&&"本人"===t.relationship?e.id-t.id:0}))),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},deleteUser:function(t){var n=this;return(0,a.default)(r.default.mark((function o(){var a;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(0!=n.isEnableClick){o.next=2;break}return o.abrupt("return");case 2:a=n,e.showModal({title:"删除",content:"是否删除该用药人",success:function(n){if(n.confirm)e.showLoading({title:"删除中..."}),a.postDeleteRequest(t);else if(n.cancel)return}});case 4:case"end":return o.stop()}}),o)})))()},postDeleteRequest:function(t){var n=this;return(0,a.default)(r.default.mark((function o(){var a,i;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return"/api/user/delGoodsUser","POST",a={openid:e.getStorageSync("openid"),id:t.id},o.prev=3,o.next=6,(0,s.default)("yzy_app","/api/user/delGoodsUser","POST",a);case 6:i=o.sent,console.log(i),99==i.code?(e.showToast({title:"成功"}),n.getGoodsUser()):e.showToast({title:i.data.sm}),e.hideLoading(),o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](3),console.log(o.t0);case 15:e.hideLoading();case 16:case"end":return o.stop()}}),o,null,[[3,12]])})))()},calculateAge:function(e){var t=new Date(e.substr(0,4),e.substr(4,2)-1,e.substr(6,2)),n=new Date,o=n-t,r=Math.floor(o/31536e6);return r},hideCode:function(){this.popup=!0},hideCode2:function(){0!=this.isEnableClick?this.popupidverify=!0:console.log("正在验证,不给退出")},showAddFrame:function(){this.$refs.popup.open("center")}}};t.default=i}).call(this,n("543d")["default"])}},[["4628","common/runtime","common/vendor"]]]);
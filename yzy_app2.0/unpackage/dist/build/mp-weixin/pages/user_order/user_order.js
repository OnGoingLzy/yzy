(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user_order/user_order"],{"0440":function(t,e,r){"use strict";r.r(e);var n=r("4a0a"),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"10f3":function(t,e,r){"use strict";var n=r("ab24"),i=r.n(n);i.a},"4a0a":function(t,e,r){"use strict";(function(t){var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(r("2eee")),o=n(r("c973")),s=n(r("24db")),a={components:{orderCard:function(){Promise.all([r.e("common/vendor"),r.e("components/order/order_card")]).then(function(){return resolve(r("decb"))}.bind(null,r)).catch(r.oe)}},data:function(){return{choiceBar:"test0",orderList:[],filterOrderList:[],searchContent:""}},onLoad:function(t){console.log(t.num),this.choiceBar=t.num,this.getOrderList()},watch:{},onShow:function(){},onPullDownRefresh:function(){console.log("refresh"),this.searchOrder(),setTimeout((function(){t.stopPullDownRefresh()}),1e3),this.getOrderList()},methods:{toPublicAccount:function(){t.navigateTo({url:"/pages/public_account/public_account"})},searchOrder:function(){var e=this;t.showLoading({title:"查询中..."}),this.selectBar(this.choiceBar),""===this.searchContent||(this.filterOrderList=this.filterOrderList.filter((function(t){var r=t.goodsList.some((function(t){return t.genericName&&t.genericName.includes(e.searchContent)})),n=t.shopInfo.some((function(t){return t.shopName&&t.shopName.includes(e.searchContent)})),i=t.main_order_id&&t.main_order_id.includes(e.searchContent),o=t.status&&t.status.includes(e.searchContent);return r||n||i||o}))),t.hideLoading()},calcTotalPriceAndNum:function(){null!=this.orderList&&0!=this.orderList.length&&this.orderList.forEach((function(t){var e=0,r=0;t.goodsList.forEach((function(t){e+=t.num,r+=t.totalPrice})),t.totalNum=e,t.totalPrice=r+t.shippingFee;var n=t.totalPrice,i=n.toString(),o=i.match(/^-?\d+(?:\.\d{0,2})?/),s=o?o[0]:"";t.totalPrice=s}))},getOrderList:function(){var e=this;return(0,o.default)(i.default.mark((function r(){var n,o;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.showLoading({title:"查询中"}),"/api/trade/getOrderList","POST",n={openid:t.getStorageSync("openid")},r.prev=4,r.next=7,(0,s.default)("yzy_app","/api/trade/getOrderList","POST",n);case 7:o=r.sent,console.log(o),99==o.code&&(o.data.data?(e.orderList=o.data.data,e.selectBar(e.choiceBar),e.calcTotalPriceAndNum(),t.hideLoading()):(t.hideLoading(),t.showToast({title:"没查到订单信息",icon:"none"}))),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](4),console.log(r.t0),t.showToast({icon:"none",title:"服务器出错了"});case 16:case"end":return r.stop()}}),r,null,[[4,12]])})))()},selectBar:function(e){if(t.showLoading({title:"查询中"}),console.log(e),this.choiceBar=e,null!=this.orderList&&0!=this.orderList.length){if("test0"==e)this.filterOrderList=this.orderList;else if("test1"==e){var r=this.orderList.filter((function(t){return"待付款"===t.status}));this.filterOrderList=r}else if("test2"==e){var n=this.orderList.filter((function(t){return"待发货"===t.status}));this.filterOrderList=n}else if("test3"==e){var i=this.orderList.filter((function(t){return"待收货"===t.status}));this.filterOrderList=i}else{var o=this.orderList.filter((function(t){return"待退款"===t.status||"已退款"===t.status||"退款中"===t.status||"退款待审核"===t.status||"已取消"===t.status}));this.filterOrderList=o}setTimeout((function(){t.hideLoading()}),1e3)}else t.hideLoading()}}};e.default=a}).call(this,r("543d")["default"])},7346:function(t,e,r){"use strict";(function(t,e){var n=r("4ea4");r("7711");n(r("66fd"));var i=n(r("f97e"));t.__webpack_require_UNI_MP_PLUGIN__=r,e(i.default)}).call(this,r("bc2e")["default"],r("543d")["createPage"])},a546:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,r=(t._self._c,t.filterOrderList.length);t._isMounted||(t.e0=function(e){t.searchContent=""}),t.$mp.data=Object.assign({},{$root:{g0:r}})},i=[]},ab24:function(t,e,r){},f97e:function(t,e,r){"use strict";r.r(e);var n=r("a546"),i=r("0440");for(var o in i)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return i[t]}))}(o);r("10f3");var s=r("f0c5"),a=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=a.exports}},[["7346","common/runtime","common/vendor"]]]);
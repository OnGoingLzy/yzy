(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_order/goods_order"],{1470:function(e,t,o){"use strict";var n=o("b8ea"),s=o.n(n);s.a},"881b":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}));var n={uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"0336"))},uniTag:function(){return o.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(o.bind(null,"ccec"))},uniIcons:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(o.bind(null,"f79a"))}},s=function(){var e=this.$createElement;this._self._c},i=[]},a4c0:function(e,t,o){"use strict";o.r(t);var n=o("e347"),s=o.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},b8ea:function(e,t,o){},e347:function(e,t,o){"use strict";(function(e){var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(o("448a")),i=n(o("9523")),a={data:function(){var t;return t={searchValue:"123123",show:this.showInit,showSync:!1,searchVal:this.searchValInit,isShowInit:!0,defS:JSON.parse(JSON.stringify(e.getStorageSync("dSv"))),reobj:{spcxm:"",pageIndex:1,pageSize:20,drugsIdlist:[]},timer:null,kw:"",searchResults:[],historyList:[],hotList:[],hotSearchLists:["艾滋阻断必妥维","阳康后免疫调节","夏季清肝去火","中风昏迷","老年人骨质疏松","壮阳补肾","糖尿病新药华堂宁","瑞百安","密固达","日达仙"],isloading:!0,time:1,times:2,total:""},(0,i.default)(t,"show",""),(0,i.default)(t,"tg_czy",""),(0,i.default)(t,"goodsList",[]),(0,i.default)(t,"total",0),(0,i.default)(t,"isloading",!1),(0,i.default)(t,"code",""),(0,i.default)(t,"openid",""),(0,i.default)(t,"times",2),(0,i.default)(t,"show",""),(0,i.default)(t,"inputSpmc",""),(0,i.default)(t,"inputSccs",""),(0,i.default)(t,"contactHidden",!0),(0,i.default)(t,"promotionCodeHidden",!0),(0,i.default)(t,"promotionCodeUrl","data:image/jpeg;base64,"),(0,i.default)(t,"baseUrl",""),(0,i.default)(t,"navList",[{name:"新药",image_src:"../../static/xy.png",open_type:"switchTab",navigator_url:"/pages/category/index"},{name:"特药",image_src:"../../static/ty.png"},{name:"日常用药",image_src:"../../static/rcyy.png"},{name:"全部分类",image_src:"../../static/qbfl.png"}]),t},onLoad:function(t){var o=this;if(this.time=1,e.setStorageSync("pagelx","推广码"),e.setStorageSync("dS",""),console.log(e.getStorageSync("kw")),this.historyList=JSON.parse(e.getStorageSync("kw")||"[]"),e.getStorageSync("dSv")&&this.input(e.getStorageSync("dS")),e.request({url:"https://appletservice.dyb.yn.cn/api/GetHotmedicine",method:"POST",header:{"Content-Type":"application/json","X-Ca-Key":"wxe7c826a1a5e00055","X-Service-Method":"GetHotmedicine"},data:{lxdh:e.getStorageSync("lxdh")},success:function(e){o.hotList=Array.from(e.data.split(","))}}),this.times=2,this.reobj.spcxm=t.spcxm||"",console.log("推广码"+t.scene),console.log("推广码2"+e.getStorageSync("tg_czy")),t.scene&&""!==t.scene&&null!==t.scene){console.log("有推广码");var n=decodeURIComponent(t.scene);this.tg_czy=n,e.setStorageSync("tg_czy",n)}else e.getStorageSync("tg_czy")?(console.log("无推广码1"),e.setStorageSync("tg_czy","")):console.log("有推广码1");console.log("推广码3"+e.getStorageSync("tg_czy"))},methods:{confirmNotice:function(){this.$refs.popup.close()},inputData:function(e){this.inputSpmc=e.detail.value},getGoodsList:function(){var t=this.inputSpmc;if(this.kw=t,console.log("查询:"+t),this.saveSearchHistory(),""==t){e.setStorageSync("dS",{drugsList:[],spcxm:""}),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})}e.request({url:"http://47.120.7.226/api/select",method:"GET",data:{searchName:t},success:function(o){console.log(o.data.drugList);var n={drugsList:o.data.drugList,spcxm:t};e.setStorageSync("dS",n),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})},fail:function(e){console.log(e.errMsg)}})},getGoodsList2:function(){var t=this.inputSpmc;this.kw=t,console.log("查询:"+t);var o={spcxm:this.inputSpmc};e.setStorageSync("dS",o),this.saveSearchHistory(),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})},goHotspxx:function(e){this.isShowInit=!0,this.inputSpmc=e,this.kw=this.inputSpmc,this.saveSearchHistory(),this.getGoodsList2()},callPhone:function(t){var o=t.match(/\d+-?\d+/g);if(o&&o.length>0){var n=o[0];console.log("提取到的电话号码："+n),e.makePhoneCall({phoneNumber:n})}else console.log("未找到电话号码")},gotoSearch:function(){e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})},gotoDetail:function(t){e.navigateTo({url:"/subpkg/goods_detail/goods_detail?spdm="+t.spdm})},navClickHandler:function(t){var o={value:t.name};e.setStorageSync("dS",o),e.setStorageSync("dSv",o.value),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})},formSubmit:function(t){var o={value:t.detail.value.spmc+","+t.detail.value.sccs};this.kw=t.detail.value.spmc,this.saveSearchHistory(),e.setStorageSync("dS",o),e.setStorageSync("dSv",o.value),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})},formReset:function(e){console.log("清空数据"),this.inputSccs="",this.inputSpmc=""},clearSpmc:function(){console.log("清空数据"),this.inputSpmc=""},scanbar:function(){console.log("进入了扫码方法"),e.scanCode({scanType:["barCode"],success:function(t){console.log("条码类型："+t.scanType),console.log("条码内容："+t.result);var o={value:t.result};e.setStorageSync("dS",o),e.setStorageSync("dSv",o.value),e.navigateTo({url:"/pages/goods_order_search/goods_order_search"})}})},trigger:function(t){var o=this;if("客服"===t.item.text&&(this.contactHidden=!1),"推广码"===t.item.text){if(!e.getStorageSync("lxdh"))return this.delayNavigate();this.promotionCodeHidden=!1,e.request({url:"https://appletservice.dyb.yn.cn/api/GetUnlimitedQRCode",method:"POST",header:{"Content-Type":"application/json","X-Ca-Key":"wxe7c826a1a5e00055","X-Service-Method":"GetUnlimitedQRCode"},data:{lxdh:e.getStorageSync("lxdh")},success:function(e){-99!=e.data.result&&(o.promotionCodeUrl=o.promotionCodeUrl+e.data.data)}})}},hideContact:function(){this.contactHidden=!0},hideCode:function(){this.promotionCodeHidden=!0},input:function(e){this.kw=e.value},delayNavigate:function(){var t=this;this.seconds=3,this.showTips(this.seconds),this.timer=setInterval((function(){if(t.seconds--,t.seconds<=0)return clearInterval(t.timer),void e.navigateTo({url:"/subpkg/login/login"});t.showTips(t.seconds)}),1e3)},showTips:function(t){e.showToast({icon:"none",title:"请授权后再之重新打开推广码！"+t+"秒之后自动跳转到授权页",mask:!0,duration:1500})},saveSearchHistory:function(){console.log("存储搜索历史");var t=new Set(this.historyList);0!==this.kw.trim().length&&(t.delete(this.kw.trim()),t.add(this.kw.trim()));var o=Array.from(t);o.length>8&&t.delete(o[1]),this.historyList=Array.from(t).reverse(),e.setStorageSync("kw",JSON.stringify(Array.from(t)))},clean:function(){this.historyList=[],e.setStorageSync("kw","[]")},gotoGoodsList:function(e){this.isShowInit=!0,this.inputSpmc=e,this.getGoodsList2()}},computed:{historys:function(){return(0,s.default)(this.historyList).reverse()}}};t.default=a}).call(this,o("543d")["default"])},e39e:function(e,t,o){"use strict";o.r(t);var n=o("881b"),s=o("a4c0");for(var i in s)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return s[e]}))}(i);o("1470");var a=o("f0c5"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=r.exports},e6a0:function(e,t,o){"use strict";(function(e,t){var n=o("4ea4");o("7711");n(o("66fd"));var s=n(o("e39e"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(s.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])}},[["e6a0","common/runtime","common/vendor"]]]);
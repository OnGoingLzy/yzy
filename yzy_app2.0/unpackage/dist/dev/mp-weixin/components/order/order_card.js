(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/order/order_card"],{546:function(e,t,n){"use strict";n.r(t);var o=n(547),r=n(549);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n(551);var i,s=n(72),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);c.options.__file="components/order/order_card.vue",t["default"]=c.exports},547:function(e,t,n){"use strict";n.r(t);var o=n(548);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},548:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return o}));try{o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,525))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,632))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement;e._self._c},a=!1,i=[];r._withStripped=!0},549:function(e,t,n){"use strict";n.r(t);var o=n(550),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},550:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(30)),a=o(n(32)),i=o(n(33)),s=o(n(264)),c={props:{order:{default:null}},data:function(){return{checkboxValue:0,checkboxRange:[{value:0,text:"请选择"}],showMore:!1,orderInfo:{shop:{shopId:1,shopName:"测试店铺"},goods:[{goodsName:"测试药品1",price:16.8,goodsImg:"/static/icon/shop.svg",description:"20mgx6粒/瓶",num:1},{goodsName:"测试药品2",price:16.8,goodsImg:"/static/icon/shop.svg",description:"20mgx6粒/瓶",num:1}],order:{orderNo:"202308031154",orderStatus:"待付款"},allPrice:30,fee:0,discounts:3.6},totalPrice:0,totalNum:0,shippingFee:0,defaultPic:"http://images.yndzyf.com/getimage.ashx?mlszh=17700932",imgurl:"http://images.yndzyf.com/getimage.ashx?mlszh=",isEnableClick:!0,textareaContent:"",eventChannel:null}},mounted:function(){},methods:{toPurchasedGoodsDetails:function(t){e.navigateTo({url:"/pages/purchased_goods_details/purchased_goods_details?goods="+encodeURIComponent(JSON.stringify(t))})},toShop:function(){e.navigateTo({url:"/pages/shop_certificate/shop_certificate?shopName="+encodeURIComponent(JSON.stringify(this.order.shopInfo[0].shopName))+"&shopId="+encodeURIComponent(JSON.stringify(this.order.shopInfo[0].shopId))})},showImg:function(t){e.previewImage({urls:[t],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){},fail:function(e){console.log(e.errMsg)}}})},getRefundReason:function(){var t=this;return(0,a.default)(r.default.mark((function n(){var o,a,s,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="/api/User/getRefundReason",a="POST",s={openid:e.getStorageSync("openid")},n.prev=3,n.next=6,(0,i.default)("yzy_app",o,a,s);case 6:c=n.sent,console.log(c),99==c.code?t.checkboxRange=JSON.parse(c.data):e.showToast({icon:"error",title:c.msg,duration:3e3}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),e.showToast({icon:"error",title:n.t0,duration:3e3});case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},callPhone:function(t){var n=t.match(/\d+-?\d+/g);if(n&&n.length>0){var o=n[0];console.log("提取到的电话号码："+o),e.makePhoneCall({phoneNumber:o})}else console.log("未找到电话号码")},clickShowMore:function(){this.showMore=!this.showMore},confirmReceived:function(){console.log(this.order.main_order_id);var t=this;e.showModal({title:"确认收货",content:"您确定即将对该笔订单进行确认收货吗？",success:function(e){if(e.confirm)t.uploadConfirmMsg(t.order.main_order_id);else if(e.cancel)return}})},uploadConfirmMsg:function(t){var n=this;return(0,a.default)(r.default.mark((function o(){var a,s,c,u,d;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a="/api/User/uploadConfirmReceived",s="POST",c={tradeNo:t,confirmType:"客户确认"},o.prev=3,o.next=6,(0,i.default)("yzy_app",a,s,c);case 6:u=o.sent,console.log(u),99==u.code?(d=JSON.parse(u.data),n.uploadConfirmMsgToZhyf(t,d.operateId,d.receiveConfirmTime)):e.showToast({icon:"error",title:"确认收货失败",duration:3e3}),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](3),e.showToast({icon:"error",title:o.t0,duration:3e3});case 14:case"end":return o.stop()}}),o,null,[[3,11]])})))()},uploadConfirmMsgToZhyf:function(t,n,o){var i=this;return(0,a.default)(r.default.mark((function a(){var c,u,d,l,p;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c="/api/Zhyf/getOuterOrderReceived",u="POST",d={tradeNo:t,confirmType:"客户确认",confirmTime:o,operateId:n},l=JSON.stringify(d),r.prev=4,r.next=7,(0,s.default)("yzy_app",c,u,l);case 7:p=r.sent,console.log(p),99==p.code?(e.showToast({icon:"success",title:"确认收货成功",duration:3e3}),i.$emit("childMethod")):e.showToast({icon:"error",title:"确认收货失败",duration:3e3}),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](4),e.showToast({icon:"error",title:r.t0,duration:3e3});case 15:case"end":return r.stop()}}),a,null,[[4,12]])})))()},refund:function(){e.requestSubscribeMessage({tmplIds:["uJZopLHooaB2-RHZ_mkkn59E_a9KJjCa_INAdBtf_9U"],success:function(e){console.log(e)}}),console.log(this.order.main_order_id);this.$refs.popup.open("center"),this.getRefundReason()},refundCancel:function(){this.$refs.popup.close(),this.textareaContent="",this.checkboxValue=0},refundConfirm:function(){var t=this;if(0!==this.checkboxValue){e.showLoading({title:"请稍等...",mask:!0});var n=this.checkboxRange.find((function(e){return e.value===t.checkboxValue})),o=n?n.text:"",r=o+"："+this.textareaContent;console.log(r),this.applyReturned(this.order.main_order_id,r)}else e.showToast({icon:"error",title:"请选择退货原因",duration:3e3})},applyReturned:function(t,n){var o=this;return(0,a.default)(r.default.mark((function a(){var s,c,u,d;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s="/api/User/applyReturned",c="POST",u={orign_main_order_id:t,reasonOfReturn:n},r.prev=3,r.next=6,(0,i.default)("yzy_app",s,c,u);case 6:d=r.sent,console.log(d),99==d.code?(JSON.parse(d.data),e.hideLoading()):(e.hideLoading(),e.showToast({icon:"error",title:"申请退款失败,"+d.msg,duration:3e3}),o.$refs.popup.close(),o.checkboxValue=0,o.$emit("childMethod")),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](3),e.showToast({icon:"error",title:r.t0,duration:3e3});case 14:case"end":return r.stop()}}),a,null,[[3,11]])})))()},getJsonZhyfOrderReturned:function(t,n){var o=this;return(0,a.default)(r.default.mark((function a(){var s,c,u,d;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s="/api/User/getJsonZhyfOrderReturned",c="POST",u={main_order_id:t},r.prev=3,r.next=6,(0,i.default)("yzy_app",s,c,u);case 6:d=r.sent,console.log(d),99==d.code?o.sendApplyReturned(d.data,n):(e.showToast({icon:"error",title:d.msg,duration:3e3}),e.hideLoading(),o.$refs.popup.close(),o.checkboxValue=0,o.$emit("childMethod")),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](3),e.showToast({icon:"error",title:r.t0,duration:3e3});case 14:case"end":return r.stop()}}),a,null,[[3,11]])})))()},sendApplyReturned:function(t,n){var o=this;return(0,a.default)(r.default.mark((function a(){var i,c,u,d,l;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i="/api/Zhyf/getApplyForOuterOrderReturned",c="POST",u=JSON.parse(t),u.operateId=n,d=JSON.stringify(u),r.prev=5,r.next=8,(0,s.default)("yzy_app",i,c,d);case 8:l=r.sent,console.log("申请退款成功！"),console.log(l),99==l.code?(e.hideLoading(),o.$refs.popup.close(),o.checkboxValue=0,o.$emit("childMethod"),o.textareaContent="",e.showToast({icon:"success",title:"申请成功，请等待审核",duration:3e3})):(e.showToast({icon:"error",title:l.msg,duration:3e3}),e.hideLoading(),o.$refs.popup.close(),o.checkboxValue=0,o.$emit("childMethod")),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](5),e.showToast({icon:"error",title:r.t0,duration:3e3});case 17:case"end":return r.stop()}}),a,null,[[5,14]])})))()},queryOrder:function(e){return(0,a.default)(r.default.mark((function t(){var n,o,a,s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/api/Trade/requestYinhaiQueryOrder",o="POST",a={main_order_id:e},t.prev=3,t.next=6,(0,i.default)("yzy_app",n,o,a);case 6:s=t.sent,console.log(s),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},OpenYhPay:function(){console.log(this.order.cash_url),e.navigateTo({url:"/subPackage_yinhai/yinhaiPay/yinhaiPay?main_order_id="+encodeURIComponent(JSON.stringify(this.order.main_order_id))+"&cash_url="+encodeURIComponent(JSON.stringify(this.order.cash_url))})},OpenRefund:function(t){e.navigateTo({url:"/subPackage_yinhai/yinhaiRefund/yinhaiRefund?main_order_id="+encodeURIComponent(JSON.stringify(t))})},testExistsPrePayOrderWxPay:function(){var t=this;return(0,a.default)(r.default.mark((function n(){var o,a,s,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="/api/example/testExistsPrePayOrderWxPay",a="POST",s={businessUnitId:t.order.shopInfo[0].businessUnitId,openid:e.getStorageSync("openid"),main_order_id:t.order.main_order_id},n.prev=3,n.next=6,(0,i.default)("yzy_app",o,a,s);case 6:c=n.sent,console.log(c),99==c.code?t.requestWxPay(c.data,c.data.main_order_id):e.showToast({icon:"none",title:c.msg}),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](3),console.log(n.t0),e.showToast({icon:"none",title:"服务器出错了"});case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))()},requestWxPay:function(t,n){var o=this;e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(r){console.log("支付成功"),e.showToast({icon:"success",title:"支付成功"}),o.testQueryPay(t.out_order_id,n)},fail:function(r){console.log("支付失败"),e.showToast({icon:"none",title:"支付失败"}),o.testQueryPay(t.out_order_id,n)}})},testQueryPay:function(t,n){var o=this;return(0,a.default)(r.default.mark((function a(){var s,c,u,d;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s="/api/example/testQueryPayOrder",c="POST",u={openid:e.getStorageSync("openid"),main_order_id:n,out_order_id:t},r.prev=3,r.next=6,(0,i.default)("yzy_app",s,c,u);case 6:d=r.sent,console.log(d),99==d.code?o.uploadOrderToZhyf(d.msg,d.data.operateId):e.showToast({icon:"none",title:"查询失败"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](3),console.log(r.t0),e.showToast({icon:"none",title:"服务器出错了"});case 15:case"end":return r.stop()}}),a,null,[[3,11]])})))()},uploadOrderToZhyf:function(e,t){var n=this;return(0,a.default)(r.default.mark((function o(){var a,i,c,u,d;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=JSON.parse(e),a.operateId=t,console.log(JSON.stringify(a)),i="/api/Zhyf/makeAccountForOuterOrder",c="POST",u=JSON.stringify(a),o.prev=6,console.log(u),o.next=10,(0,s.default)("yzy_app",i,c,u);case 10:d=o.sent,console.log(d),99==d.code&&(console.log("销售记录上传智慧药房成功！"),n.$emit("childMethod")),o.next=18;break;case 15:o.prev=15,o.t0=o["catch"](6),console.log(o.t0);case 18:case"end":return o.stop()}}),o,null,[[6,15]])})))()}}};t.default=c}).call(this,n(2)["default"])},551:function(e,t,n){"use strict";n.r(t);var o=n(552),r=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},552:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/order/order_card.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/order/order_card-create-component',
    {
        'components/order/order_card-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(546))
        })
    },
    [['components/order/order_card-create-component']]
]);

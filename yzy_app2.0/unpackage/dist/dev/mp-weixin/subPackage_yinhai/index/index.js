(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackage_yinhai/index/index"],{467:function(e,n,t){"use strict";(function(e,n){var r=t(4);t(26);r(t(25));var a=r(t(468));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t(1)["default"],t(2)["createPage"])},468:function(e,n,t){"use strict";t.r(n);var r=t(469),a=t(471);for(var c in a)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(c);var o,s=t(72),u=Object(s["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],o);u.options.__file="subPackage_yinhai/index/index.vue",n["default"]=u.exports},469:function(e,n,t){"use strict";t.r(n);var r=t(470);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},470:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return o})),t.d(n,"recyclableRender",(function(){return c})),t.d(n,"components",(function(){return r}));var a=function(){var e=this,n=e.$createElement;e._self._c},c=!1,o=[];a._withStripped=!0},471:function(e,n,t){"use strict";t.r(n);var r=t(472),a=t.n(r);for(var c in r)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(c);n["default"]=a.a},472:function(e,n,t){"use strict";(function(e,r){var a=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=a(t(30)),o=a(t(11)),s=a(t(32)),u=a(t(33));function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,o.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=requirePlugin("yh-pay-plugin"),f={data:function(){return{createOrderParam:null,cash_url:"",eventChannel:null}},onLoad:function(n){if(n.orderInfo){this.createOrderParam=JSON.parse(decodeURIComponent(n.orderInfo));var t=this;console.log(t.createOrderParam),e.login({success:function(e){l.init({url:"https://zhuguangcao.mynatapp.cc/yy",dppSyscode:t.createOrderParam.dppSyscode,dsmpSyscode:"1002100022",authCode:e.code,chnlAppId:"wxe7c826a1a5e00055",acssToken:t.createOrderParam.acssToken}).then((function(e){console.log("插件初始化成功1")})).catch((function(e){console.log("插件初始化失败1：".concat(e.errMsg))}))}})}},methods:{testRequestRefund:function(){var n=this;return(0,s.default)(c.default.mark((function t(){var r,a,o,s,i;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,a="/api/Trade/yinHaiRefund",o="POST",s={main_order_id:"202350000637"},t.prev=4,t.next=7,(0,u.default)("yzy_app",a,o,s);case 7:i=t.sent,console.log(i),99==i.code?e.login({success:function(e){l.init({url:"https://zhuguangcao.mynatapp.cc/yy",dppSyscode:i.data.dppSyscode,dsmpSyscode:"1002100022",authCode:e.code,chnlAppId:"wxe7c826a1a5e00055",acssToken:i.data.acssToken}).then((function(e){console.log("插件初始化成功2"),r.testRefundOrder(i.data)})).catch((function(e){console.log("插件初始化失败2：".concat(e.errMsg))}))}}):e.$showMsg(i.msg,1e3),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()},testPublishMsg:function(){return(0,s.default)(c.default.mark((function e(){var n,t,r,a;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/PublishMsg/PublishRefundMsg",t="POST",r={},e.prev=3,e.next=6,(0,u.default)("yzy_app",n,t,r);case 6:a=e.sent,console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},testApi:function(){return(0,s.default)(c.default.mark((function e(){var n,t,r,a;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/Trade/requestYinhaiQueryOrder",t="POST",r={main_order_id:"202325000778",type:"付款"},e.prev=3,e.next=6,(0,u.default)("yzy_app",n,t,r);case 6:a=e.sent,console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},testApi2:function(){return(0,s.default)(c.default.mark((function e(){var n,t,r,a;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/Trade/requestYinhaiQueryRefundOrder",t="POST",r={main_order_id:"202350000637",type:"退款"},e.prev=3,e.next=6,(0,u.default)("yzy_app",n,t,r);case 6:a=e.sent,console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},queryOrder:function(e,n){return(0,s.default)(c.default.mark((function t(){var r,a,o,s;return c.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="/api/Trade/requestYinhaiQueryOrder",a="POST",o={main_order_id:e,type:n},t.prev=3,t.next=6,(0,u.default)("yzy_app",r,a,o);case 6:s=t.sent,console.log(s),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},testCreateOrder:function(){var e=this,n=this;l.createOrderDsmp({medins_code:this.createOrderParam.medins_code,medins_name:this.createOrderParam.medins_name,opter_type:"102",opter_id:this.createOrderParam.yinhaiCreateOrderObject.acss_sys_ord_no,opter_name:"***",input_data:this.createOrderParam.yinhaiCreateOrderObject}).then((function(t){console.log(t),console.log(t.data.cash_url);var r="plugin://yh-pay-plugin/"+t.data.cash_url;console.log(r),n.saveResData(t.data,e.createOrderParam.yinhaiCreateOrderObject.acss_sys_ord_no,r)})).catch((function(e){console.log("err:".concat(JSON.stringify(e)))}))},testRefundOrder:function(e){var n=this;console.log(e.yinhaiCreateRefundOrderObject),l.orderRefundDsmp({medins_code:e.medins_code,medins_name:e.medins_name,opter_type:"102",opter_id:e.yinhaiCreateRefundOrderObject.acss_sys_refd_ord_no,opter_name:"***",input_data:e.yinhaiCreateRefundOrderObject}).then((function(t){console.log(t),console.log(t.data.cash_url);var r="plugin://yh-pay-plugin/"+t.data.cash_url,a="退款";n.saveResData(t.data,e.yinhaiCreateRefundOrderObject.acss_sys_refd_ord_no,r,a)})).catch((function(e){console.log("err:".concat(JSON.stringify(e)))}))},saveResData:function(e,n,t,r){var a=this;return(0,s.default)(c.default.mark((function o(){var s,i,d,l,f;return c.default.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return s=a,i="/api/trade/updateYinHaiOrderInfo",d="POST",console.log(r),l={orderInfo:e,main_order_id:n,type:r},c.prev=5,c.next=8,(0,u.default)("yzy_app",i,d,l);case 8:f=c.sent,console.log(f),99==f.code&&s.testOpenPay(t,n),c.next=16;break;case 13:c.prev=13,c.t0=c["catch"](5),console.log(c.t0);case 16:case"end":return c.stop()}}),o,null,[[5,13]])})))()},testOpenPay:function(n,t){var a=this;console.log("退款地址"+n),e.navigateTo({url:n,events:{wxPayEvent:function(e){console.log("wxPayEvent data:".concat(JSON.stringify(e))),r.requestPayment(d(d({},e),{},{complete:function(e){a.eventChannel.emit("wxPaymentComplete",e),console.log("微信支付操作完成 res: ".concat(JSON.stringify(e))),"requestPayment:fail cancel"==e.errMsg?a.queryOrder(a.main_order_id,"付款"):(a.queryOrder(a.main_order_id,"付款"),a.payOver=!0)}}))}},success:function(e){a.eventChannel=e.eventChannel}})},testQueryOrder:function(){l.queryOrderDsmp({medins_code:"P53050201208",medins_name:"云南省医药有限公司新特药保山零售店",opter_type:"102",opter_id:"530002",opter_name:"lzy",input_data:{plaf_ord_no:"PP202311011921393941"}}).then((function(e){console.log("res:".concat(JSON.stringify(e)))}))}}};n.default=f}).call(this,t(2)["default"],t(1)["default"])}},[[467,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subPackage_yinhai/index/index.js.map
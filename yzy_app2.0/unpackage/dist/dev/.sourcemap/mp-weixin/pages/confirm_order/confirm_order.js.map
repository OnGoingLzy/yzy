{"version":3,"sources":["uni-app:///main.js","webpack:///E:/workbench/yzy/yzy_app2.0/pages/confirm_order/confirm_order.vue?d4e8","webpack:///E:/workbench/yzy/yzy_app2.0/pages/confirm_order/confirm_order.vue?a6ec","webpack:///E:/workbench/yzy/yzy_app2.0/pages/confirm_order/confirm_order.vue?d135","webpack:///E:/workbench/yzy/yzy_app2.0/pages/confirm_order/confirm_order.vue?86aa","uni-app:///pages/confirm_order/confirm_order.vue","webpack:///E:/workbench/yzy/yzy_app2.0/pages/confirm_order/confirm_order.vue?38c6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniDataSelect","uniIcons","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","selectPayValue","__map","persons","person","index","$orig","__get_orig","m0","relationship","calculateAge","birthday","g0","distance","toFixed","g1","shippingFee","g2","Number","totalPrice","g3","selectRange","length","_isMounted","e0","$event","_temp","arguments","currentTarget","dataset","_temp2","eventParams","selectPersonIndex","selectPersonId","id","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","selectUserLocation","validSubmit","selectValue","selectPayRange","shops","selectedAddress","name","phone","province","city","district","address","checkboxSelected","totalNum","list","selectedList","isEnableClick","popup","locationId","memo","realTimePricing","canNext","priceMatch","allMatch","defaultPic","feeOrigin","selectText","cautionText","isShopping","businessHours","coldFlag","showSelector","MedicarePaymentFlag","onShow","methods","checkPayTypeChange","uni","checkPerson","url","getGoodsUser","method","openid","response","turntypeToDefault","openSelectType","checkType","showImg","urls","longPressActions","itemList","success","fail","goToShop","fatherMethods","addOver","submitOrder","tmplIds","title","mask","goodsId","goodsOuterId","shopId","getRealTimePricing","Body","realTimePriceArray","updatePriceAndInventoryToYzy","yinhaiPay","transformedDrugs","num","price","goodsList","type","payType","goodsUserId","icon","Pay","requestWxPay","provider","timeStamp","nonceStr","package","signType","paySign","that","testQueryPay","main_order_id","out_order_id","uploadOrderToZhyf","msgJson","checkboxChange","openReadText","bindTextAreaBlur","calcTotalPrice","shop","drugs","drug","total","getAddressList","showAddFrame","getShopShippingFee","addressId","cautionTextVar","value","text","caution","getGoodsColdFlag","coldDrugsCheck","onLoad","created","beforeDestroy"],"mappings":"4JAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,cAAe,WACb,OAAO,0IAITC,SAAU,WACR,OAAO,wHAITC,SAAU,WACR,OAAO,qFAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GAEK,UAAtBN,EAAIO,eACAP,EAAIQ,MAAMR,EAAIS,SAAS,SAAUC,EAAQC,GACvC,IAAIC,EAAQZ,EAAIa,WAAWH,GACvBI,EACoB,UAAtBd,EAAIO,gBACuB,MAAvBG,EAAOK,aAGTf,EAAIgB,aAAaN,EAAOO,UACxB,KACJ,MAAO,CACLL,MAAOA,EACPE,GAAIA,MAGR,MACFI,EAAKlB,EAAImB,SAASC,QAAQ,GAC1BC,EAAKrB,EAAIsB,YAAYF,QAAQ,GAC7BG,EAAKC,OAAOxB,EAAIyB,YAAYL,QAAQ,GACpCM,EAAK1B,EAAI2B,YAAYC,OACpB5B,EAAI6B,aACP7B,EAAI8B,GAAK,SAAUC,EAAQpB,EAAOD,GAChC,IAAIsB,EAAQC,UAAUA,UAAUL,OAAS,GAAGM,cAAcC,QACxDC,EAASJ,EAAMK,aAAeL,EAAM,gBACpCrB,EAAQyB,EAAOzB,MACfD,EAAS0B,EAAO1B,OAElBV,EAAIsC,kBAAoB3B,EACxBX,EAAIuC,eAAiB7B,EAAO8B,KAGhCxC,EAAIyC,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLzC,GAAIA,EACJc,GAAIA,EACJG,GAAIA,EACJE,GAAIA,EACJG,GAAIA,MAKRoB,GAAmB,EACnBC,EAAkB,GACtBhD,EAAOiD,eAAgB,G,iCCvFvB,yHAAyqB,eAAG,G,gKCoN5qB,WACA,ytBAEA,CACA1D,YACA2D,sBAEAP,gBACA,OACAQ,eACAC,cACAxB,cAAA,kDACApB,sBACA6C,iBAAA,2BACAC,SACA5B,aACA6B,iBACAC,QACAC,SACAC,YACAC,QACAC,YACAC,uBAEAtC,cACAH,WACA0C,oBACAC,WACAC,QACAC,gBACAC,iBACAC,SACAC,gBACAC,QACAC,mBACAC,WACAC,cACAC,YACAC,mEACAC,aACAC,wBACAC,eACAC,gBACAC,iBACAC,cACAC,gBACAC,uBACAxE,WACA8B,oBACAD,yBAGA4C,kBACA,sBACA,qBAEAC,SAEAC,8BACA,mCACA,6CAGA,0EACA,OAEA,yBACA,yCAEA,4BACA,yBACAC,mCAMAC,uBACAD,cACAE,mDAIAC,wBAAA,kJAMA,OALAD,2BACAE,SACA/C,GACAgD,mCACAlC,iCACA,mBAEA,qCAAAmC,SACA9F,eACA,YACA,sBACA,uCAEA,8BACA,oDACA,EACA,6CACA,EACA,6CACA,UAEA,KAIAc,mCAAA,gCACA,OAEA,sBACA,kCACA,kBAOA,wBAGA0E,sBAEA,qDAEAA,qBAAA,yDA7CA,IAiDArE,yBACA,eACAC,cACAA,gBACAA,eAGA,WACA,MAGA,wBACA,UAGA2E,6BACA,oBACA,mBACA,6BACA,mBACA,uBAGAC,0BACA,yCAGAC,sBAAA,WACA,2BACA,yBACA,uBACA,oCACA,wBACA,wBAGA,sBACA,kCAEAC,oBAGAV,gBACAW,SACAC,kBACAC,+BACAC,sBAGAC,iBACAvG,2BAMAwG,qBACAhB,cACAE,wGACA,2DAoCAe,0BACAzG,uBACA,iBAGA0G,oBAEA,0BAGAC,uBAAA,WAEAnB,2BAEAoB,wDACAN,oBACAtG,kBAKA,sBAKA,qDAKA,6CAKA,oDAKA,oBACAwF,eACAqB,eACAC,UAEA9G,6BAEA,0DACA,OACA+G,iBACAC,sBACAC,6BAGA,2BAlBAzB,sCALAA,8BALAA,8BALAA,uCAoCA0B,8BAAA,kJAKA,OAJAxB,oCACAE,SACA/C,GACAsE,wCACA,mBAEA,qCAAArB,SACA9F,eACA,gBACA,aACA,YACAoH,SACApH,oBACAA,+BACAA,wCA+EA,gBACA,cACA,iCAEA,yBACA,QACA,4BACA,cAOA,mBAGAA,4BACAwF,0BACA,qDAEAA,qBAAA,yDAnHA,IAuHA6B,yCAAA,qIAKA,OAJA3B,2CACAE,SACA/C,GACAuE,sBACA,mBAEA,qCAAAtB,SACA9F,eACA,WACAA,0BAEAA,4BACA,qDAEAA,kBAAA,yDAfA,IAkBAsH,qBAAA,kJAsBA,OArBAC,oCACA,OACA5E,QACAoE,iBACAS,UACAC,kBAIA/B,yBACAE,SACA/C,GACAgD,kCACAoB,yBACAS,YACApD,wBACAC,YACA9C,0BACAkG,kBACAC,yBACAC,8BACA,mBAEA,qCAAA/B,SACA9F,eACA,YAEAwF,gBAEAA,cACAE,uGAIAF,aACAsC,YACAjB,wBAEA,kBACA,qDAEA7G,kBACAwF,aACAsC,YACAjB,iBAEA,0EA/CA,IAmDAkB,eAAA,kJAoBA,OAlBAR,oCACA,OACA5E,QACAoE,iBACAS,UACAC,kBAGA/B,yBACAE,SACA/C,GACAgD,kCACAoB,yBACAS,YACApD,wBACAC,YACA9C,0BACAkG,mBACA,mBAEA,qCAAA7B,SACA9F,eACA,YACA,4CACAwF,iBAEAA,aACAsC,YACAjB,iBAEA,qDAEA7G,kBACAwF,aACAsC,YACAjB,iBACA,yDAtCA,IAyCAmB,2BACA,WACAxC,kBACAyC,iBACAC,sBACAC,oBACAC,kBACAC,oBACAC,kBAEAhC,oBACAtG,oBACAwF,aACAsC,eACAjB,aACAC,UAEAyB,iCACAA,aAEA/C,cACAE,+CAEA6C,kBAEAhC,iBAEAvG,oBACAwF,aACAsC,YACAjB,eAIA0B,iCAEA/C,YACAE,+CAEA6C,qBAKAC,2BAAA,gJAOA,OANA9C,mCACAE,SACA/C,GACAgD,kCACA4C,gBACAC,gBACA,mBAEA,qCAAA5C,SACA9F,eACA,aACAA,+BACAA,mBACAA,2CACA,4CACAA,8BACA,qDAEAA,kBAAA,yDAnBA,IAwBA2I,gCAAA,uIAQA,OAPAC,gBACAA,cACA5I,+BACA0F,uCACAE,SACA/C,oBAAA,SAEA7C,eAAA,WACA,sCAAA8F,SACA9F,eACA,YACAA,6BAGA,qDAEAA,kBAAA,yDAjBA,IAqBA6I,0BACA,8CAEAC,wBACAtD,cACAE,gDAGAqD,6BACA,yBACA/I,6BAEAgJ,0BAEA,gDACAC,OACAC,+BAAA,cACAC,OACAC,8BAGA,mCACAH,OACAG,oCAAA,2BAEA,gDAGA,yCACAH,yBAAA,mBAGA,0CACAjJ,8BAIA,yBAEA,eAEA,kCAEA,YACA,kBAEA,iBAGAqJ,0BAAA,gJAKA,OAJA3D,6BACAE,SACA/C,GACAgD,mCACA,mBAEA,qCAAAC,SACA9F,eACA,YACAA,2BACA,iCACA,2CACA,iDACAA,gCAEAA,4BACA,qDAEAA,kBAAA,yDAnBA,IAsBAsJ,wBACA,iCAIAC,8BAAA,kJAMA,OALA7D,iCACAE,SACA/C,GACAoE,yBACAuC,wBACA,mBAEA,qCAAA1D,SACA9F,2BACAA,eACA,iBACAuI,IAEA,wBAEA,iBAEA,2BAEA,qCAEA,2BACA,gBAEA,gBAGA,sDAEA,iCACA,SAEA,mBAEAkB,EADA,aACAA,kDAEAA,qDAEA,gBAEAA,EADA,aACAA,8BAEAA,uCAEA,gBAEAA,EADA,aACAA,gCAEAA,uCAEA,kBAEAA,EADA,aACAA,qDAEAA,sDAGA,oBAAAC,WAAAC,YAAAlC,2BAAAmC,YACAH,SAGA,iBACA,2GAEA,oBAEAzJ,iCACA,qDAEAA,kBAAA,yDAtEA,IA0EA6J,4BAAA,kJAUA,OATAC,oCACA,OACA/C,qBAGArB,gCACAE,SACA/C,GACA6E,aACA,mBAEA,qCAAA5B,SACA9F,eACA,gBACA,sBACA,cAEA,cAGAA,yBACA,qDAEAA,kBAAA,yDAxBA,KA4BA+J,mBACA,6CACA/J,eACA,aACA,iFAEA,GAEA,4BACA,iFAEA,6BAGAgK,mBAAA,WACAxE,wCACAxF,kCACAA,eACA,8BACA,8BACA,oCACA,8BACA,kBACAA,6CACA,sBACA,qBACA,0BAEAwF,oCACA,mBACAxF,uBACA,kCAEAwF,uCACA,mBACAxF,6CACA,mCAGAiK,yBAEAzE,+BAEA,c,6DC5gCA,yHAA+8B,eAAG,G","file":"pages/confirm_order/confirm_order.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/confirm_order/confirm_order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./confirm_order.vue?vue&type=template&id=51e0fab4&\"\nvar renderjs\nimport script from \"./confirm_order.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm_order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./confirm_order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/confirm_order/confirm_order.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./confirm_order.vue?vue&type=template&id=51e0fab4&\"","var components\ntry {\n  components = {\n    uniDataSelect: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-select/components/uni-data-select/uni-data-select\" */ \"@/uni_modules/uni-data-select/components/uni-data-select/uni-data-select.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.selectPayValue == \"微信医保支付\"\n      ? _vm.__map(_vm.persons, function (person, index) {\n          var $orig = _vm.__get_orig(person)\n          var m0 = (\n            _vm.selectPayValue == \"微信医保支付\"\n              ? person.relationship == \"本人\"\n              : true\n          )\n            ? _vm.calculateAge(person.birthday)\n            : null\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  var g0 = _vm.distance.toFixed(2)\n  var g1 = _vm.shippingFee.toFixed(2)\n  var g2 = Number(_vm.totalPrice).toFixed(2)\n  var g3 = _vm.selectRange.length\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, index, person) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        index = _temp2.index,\n        person = _temp2.person\n      var _temp, _temp2\n      _vm.selectPersonIndex = index\n      _vm.selectPersonId = person.id\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./confirm_order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./confirm_order.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"confirm-order\">\r\n\t\t<view class=\"address-card card-shadow\" @click=\"showAddFrame()\">\r\n\t\t\t<view class=\"address-info\">\r\n\t\t\t\t<view class=\"address-details\">\r\n\t\t\t\t\t{{ selectedAddress.city }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"address-details-road\">{{ selectedAddress.address }}</view>\r\n\t\t\t\t<view class=\"address-name-phone\">\r\n\t\t\t\t\t<view class=\"address-name\">{{ selectedAddress.name }}</view>\r\n\t\t\t\t\t<view class=\"address-phone\">{{ selectedAddress.phone }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<image class=\"more-location-icon\" src=\"../../static/icon/more_person.svg\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"order-list card-shadow\">\r\n\t\t\t<view class=\"order-item\" v-for=\"items in shops\" :key=\"items.id\">\r\n\t\t\t\t<view class=\"item-list\">\r\n\t\t\t\t\t<view class=\"shop-title\" @click=\"goToShop(items)\">\r\n\t\t\t\t\t\t<image src=\"/static/tabbar/home-active.png\" style=\"width: 16px;height: 16px;\"></image>\r\n\t\t\t\t\t\t<view class=\"shop-name\">{{ items.simplifyShopName }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item\" v-for=\"item in items.drugs\" :key=\"item.id\">\r\n\t\t\t\t\t\t<view class=\"item-info\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t@click=\"showImg(item.imgLszh ? 'http://images.yndzyf.com/getimage.ashx?mlszh=' + item.imgLszh : defaultPic)\"\r\n\t\t\t\t\t\t\t\t:src=\"item.imgLszh ? 'http://images.yndzyf.com/getimage.ashx?mlszh=' + item.imgLszh : defaultPic\"\r\n\t\t\t\t\t\t\t\tmode=\"\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<view class=\"item-details\">\r\n\t\t\t\t\t\t\t\t<view class=\"item-name\">{{ item.drugName }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-spec\">{{ item.specification +'/'+item.sellUnit}}</view>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"item-spec\">{{ item.specification }}</view> -->\r\n\t\t\t\t\t\t\t\t<view class=\"item-manu\">{{ item.manufacturer }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"item-detail-right\">\r\n\t\t\t\t\t\t\t\t<view class=\"item-quantity\">x{{ item.num }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-price\">￥{{ item.price }}</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.healthInsuranceFlag=='y'\" class=\"yb-tag\">\r\n\t\t\t\t\t\t\t\t\t<text>可线上医保</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-container\">\r\n\t\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t\t<text class=\"label-word\">商品数量：</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"value\">{{'共 ' + totalNum + ' 件'}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"shipping-fee-card card-shadow\" v-if=\"selectPayValue=='微信医保支付'\">\r\n\t\t\t<view class=\"select-person-firstline\">\r\n\t\t\t\t<view class=\"select-person-title\">\r\n\t\t\t\t\t<text class=\"uni-title uni-common-pl memo\">选择用药人：</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-person\" @click=\"checkPerson()\" style=\"font-size: 0.24rem;\">\r\n\t\t\t\t\t<view class=\"f-color\">新增/编辑</view>\r\n\t\t\t\t\t<image class=\"more-person-icon\" src=\"../../static/icon/more_person.svg\" style=\"    width: 15px;height: 15px;\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-flex uni-row person-row\">\r\n\t\t\t\t<view class=\"flex-item person-item\" v-for=\"(person, index) in persons\" :key=\"index\" v-if=\"(selectPayValue=='微信医保支付')?person.relationship=='本人':true\"\r\n\t\t\t\t\t:class=\"index === selectPersonIndex ? 'persong-item-selected' : 'person-item'\"\r\n\t\t\t\t\t@click=\"selectPersonIndex = index; selectPersonId = person.id\">\r\n\t\t\t\t\t<view class=\"person-name\">{{person.goodsUserName}}\r\n\t\t\t\t\t<text style=\"color: red;font-size: 12px;;font-weight: 100;\" v-if=\"person.relationship=='本人'\">{{'('+person.relationship+')'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"person-info\">{{person.sex}}</text>\r\n\t\t\t\t\t<text class=\"person-info person-age\" v-text=\"calculateAge(person.birthday)+'岁'\"></text>\r\n\t\t\t\t\t<text class=\"person-info\" style=\"display: none;\">{{person.id}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<view class=\"shipping-fee-card card-shadow\">\r\n\t\t\t<view class=\"shipping-fee-title\" style=\"display: flex; align-items: center;\">\r\n\t\t\t\t<view class=\"uni-title uni-common-pl memo\">支付方式：</view>\r\n\t\t\t\t<uni-data-select\r\n\t\t\t\t\tv-model=\"selectPayValue\"\r\n\t\t\t\t\t:localdata=\"selectPayRange\"\r\n\t\t\t\t\t:clear=\"false\"\r\n\t\t\t\t\tclass=\"shipping-select\"\r\n\t\t\t\t\t\r\n\t\t\t\t></uni-data-select>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t<view style=\"padding-left: 11px;\">\r\n\t\t\t\t<text style=\"color: crimson;    font-size: 24rpx;\" v-if=\"MedicarePaymentFlag\">推荐选择医保支付</text>\r\n\t\t\t\t<text style=\"color: crimson;    font-size: 24rpx;\" v-if=\"!MedicarePaymentFlag\">提交订单商品存在不可线上医保支付的商品,仅支持微信支付</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"shipping-fee-card card-shadow\">\r\n\t\t\t<view class=\"shipping-fee-title\" style=\"display: flex; align-items: center;\">\r\n\t\t\t\t<view class=\"uni-title uni-common-pl memo\">配送方式：</view>\r\n\t\t\t\t<!-- 将其改造成直接点击选择的模式，而不是下拉框选择 -->\r\n\t\t\t\t<!-- <uni-data-select\r\n\t\t\t\t\tv-model=\"selectValue\"\r\n\t\t\t\t\t:localdata=\"selectRange\"\r\n\t\t\t\t\t:clear=\"false\"\r\n\t\t\t\t\tclass=\"shipping-select\"\r\n\t\t\t\t\t@change=\"selectChanged\"\r\n\t\t\t\t></uni-data-select> -->\r\n\t\t\t\t<view class=\"type-choose\" @click=\"openSelectType()\">\r\n\t\t\t\t\t<text :class=\"selectText === '请点击此处选择...' ? 'type-choose-text' : 'type-choosed-text' \" >{{selectText}}</text>\r\n\t\t\t\t\t<uni-icons :type=\"showSelector ? 'top' : 'bottom'\" size=\"14\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"item-list\">\r\n\t\t\t\t<view class=\"form-container-shipping\">\r\n\t\t\t\t\t<view class=\"form-item-caution\" v-if=\"coldFlag === true\">\r\n\t\t\t\t\t\t<view class=\"value\" style=\" color: red; font-weight: bold;\">※冷链药品仅限药房自配或到店自取※</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t<text class=\"label-word\">距离：</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"value\">{{distance.toFixed(2) + ' km'}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t<text class=\"label-word\">运费：</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"value\" style=\"color: red; font-weight: bold;\">{{ '￥' + shippingFee.toFixed(2) }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t<text class=\"label-word\">营业时间：</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"value\">{{businessHours}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t<view class=\"form-item\" v-if=\"selectText !== '请点击此处选择...'\">\r\n\t\t\t\t\t\t<view class=\"label\">\r\n\t\t\t\t\t\t\t<text class=\"label-word\">服务：</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"value\" style=\"display: flex; flex-wrap: wrap;\">{{cautionText}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-item-caution\" v-if=\"selectText === '到店自取'\">\r\n\t\t\t\t\t\t<view class=\"value\" style=\" color: #1296DB; font-weight: bold;\">您可到店刷医保卡，已支付金额将原路返回</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\" v-if=\"selectText !== '请点击此处选择...'\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"memo-card card-shadow\">\r\n\t\t\t<view class=\"uni-title uni-common-pl memo\">订单备注：</view>\r\n\t\t\t<view class=\"uni-textarea\">\r\n\t\t\t\t<textarea @blur=\"bindTextAreaBlur\" placeholder=\"请在此处填写订单备注信息(选填)\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"caution-card card-shadow\">\r\n\t\t\t<view class=\"caution-title\">订单中的药品不支持七天无理由退换</view>\r\n\t\t\t<view class=\"caution-content\">依据GSP相关规定，药品一经售出，无质量问题不退不换。</view>\r\n\t\t</view>\r\n\t\t<view class=\"blank\"></view>\r\n\t\t<view class=\"tabbar\">\r\n\t\t\t<view>\r\n\t\t\t\t<checkbox-group name=\"read\" class=\"checkbox-item\" @change=\"checkboxChange()\">\r\n\t\t\t\t\t<checkbox value=\"cb\" color=\"#1296DB\" :checked=\"checkboxSelected\" />\r\n\t\t\t\t\t<text>阅读并同意</text>\r\n\t\t\t\t\t<text class=\"f-active-color\" @click=\"openReadText()\">《商品验收标准》</text>\r\n\t\t\t\t\t<text></text>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tabbar-commit\">\r\n\t\t\t\t<view class=\"total-item\">\r\n\t\t\t\t\t<view class=\"total-price\">总计：</view>\r\n\t\t\t\t\t<text class=\"total-price-num\">￥{{Number(totalPrice).toFixed(2)}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"submit-btn\" @tap=\"submitOrder\" :disabled=\"!validSubmit\">提交订单</view> -->\r\n\t\t\t\t<button class=\"submit-btn\" @tap=\"submitOrder\" :disabled=\"!validSubmit\">提交订单</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 用户地址选择的弹出层 -->\r\n\t\t<uni-popup ref=\"popup\" type=\"center\" :mask-click=\"isEnableClick\" :animation=\"true\">\r\n\t\t\t<selectUserLocation @fatherMethod=\"fatherMethods\" ref=\"child\"></selectUserLocation>\r\n\t\t</uni-popup>\r\n\t\t\r\n\t\t<!-- 配送方式选择的弹出层 -->\r\n\t\t<uni-popup ref=\"popupShipping\" type=\"center\" :mask-click=\"isEnableClick\" :animation=\"true\">\r\n\t\t\t<view class=\"popupShipping-panel\" :style=\"'height: ' + selectRange.length * 255 + 'rpx;'\">\r\n\t\t\t\t<view class=\"panel-item\" v-for='item in selectRange' :key='item.value' @click=\"checkType(item)\">\r\n\t\t\t\t\t<view class=\"panel-item-main\">\r\n\t\t\t\t\t\t<view class=\"item-type-popup item-type-name\">{{item.text}}</view>\r\n\t\t\t\t\t\t<view class=\"item-type-popup item-type-price\">{{item.price}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"panel-item-main\" style=\"display: flex; align-items: flex-start; padding-left: 20rpx;\">\r\n\t\t\t\t\t\t<view class=\"item-type-caution caution-caution\">服务：</view>\r\n\t\t\t\t\t\t<view class=\"item-type-caution\">{{item.caution}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-item-caution\" v-if=\"item.text === '到店自取'\">\r\n\t\t\t\t\t\t<view class=\"value\" style=\" color: #1296DB; font-weight: bold;\">您可到店刷医保卡，已支付金额将原路返回</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport request from '@/common/api/request.js'\r\n\timport requestZhyf from '@/common/api/requestZhyf.js'\r\n\timport selectUserLocation from '@/components/user/select_user_location.vue'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tselectUserLocation,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvalidSubmit:true,//是否有效提交按钮\r\n\t\t\t\tselectValue: 0,\r\n\t\t\t\tselectRange: [{\"value\": 0, \"text\": \"请选择\", \"price\": 999, \"caution\": \"无caution\"}],\r\n\t\t\t\tselectPayValue:'微信支付',\r\n\t\t\t\tselectPayRange:[{\"value\": '微信支付', \"text\": \"微信支付\"}],\r\n\t\t\t\tshops: [],\r\n\t\t\t\ttotalPrice: 0, // 总价\r\n\t\t\t\tselectedAddress: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tprovince: '',\r\n\t\t\t\t\tcity: '',\r\n\t\t\t\t\tdistrict: '',\r\n\t\t\t\t\taddress: '请点击此处选择收货地址',\r\n\t\t\t\t},\r\n\t\t\t\tshippingFee: 0.00,\r\n\t\t\t\tdistance: 0.00,\r\n\t\t\t\tcheckboxSelected: false,\r\n\t\t\t\ttotalNum: 0,\r\n\t\t\t\tlist: [],\r\n\t\t\t\tselectedList: [],\r\n\t\t\t\tisEnableClick: true,\r\n\t\t\t\tpopup: true,\r\n\t\t\t\tlocationId: null,\r\n\t\t\t\tmemo: '',\r\n\t\t\t\trealTimePricing: [],\r\n\t\t\t\tcanNext: true,\r\n\t\t\t\tpriceMatch: true,\r\n\t\t\t\tallMatch: true,\r\n\t\t\t\tdefaultPic: 'http://images.yndzyf.com/getimage.ashx?mlszh=17700932',\r\n\t\t\t\tfeeOrigin: [],\r\n\t\t\t\tselectText: '请点击此处选择...',\r\n\t\t\t\tcautionText: '',\r\n\t\t\t\tisShopping: null,\r\n\t\t\t\tbusinessHours: '',\r\n\t\t\t\tcoldFlag: null,\r\n\t\t\t\tshowSelector: false,\r\n\t\t\t\tMedicarePaymentFlag:false ,//是否可医保支付,\r\n\t\t\t\tpersons:[],\r\n\t\t\t\tselectPersonId:null,\r\n\t\t\t\tselectPersonIndex:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getAddressList()\r\n\t\t\tthis.getGoodsUser()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//支付方式切换\r\n\t\t\tcheckPayTypeChange(){\r\n\t\t\t\tif(this.selectPayValue=='微信医保支付'){\r\n\t\t\t\t\tif(this.persons!=null||this.persons.length!=0){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 查找是否存在 relationship 为 \"本人\" 的对象\r\n\t\t\t\t\t\tconst index = this.persons.findIndex(person => person.relationship === \"本人\");\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\t// 如果找到了 \"本人\"，则设置索引和 ID\r\n\t\t\t\t\t\t\tthis.selectPersonIndex = index;\r\n\t\t\t\t\t\t\tthis.selectPersonId = this.persons[index].id;\r\n\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\tthis.selectPersonIndex = null;\r\n\t\t\t\t\t\t\tthis.selectPersonId = null;\r\n\t\t\t\t\t\t\tuni.$showMsg(\"请选择'本人'作为用药人!\",3000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//新增、编辑用药人\r\n\t\t\tcheckPerson() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../goods_user/goods_user?openAddUser=true'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取用药人\r\n\t\t\tasync getGoodsUser() {\r\n\t\t\t\tconst url = '/api/user/getGoodsUser';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\topenid: uni.getStorageSync(\"user_id\"),\r\n\t\t\t\t\tphone: uni.getStorageSync(\"phone\")\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tthis.persons = response.data.data;\r\n\t\t\t\t\t\tif(this.persons!=null||this.persons.length!=0){\r\n\t\t\t\t\t\t\t//对this.persons中的对象进行排序，默认把“本人”放在最前面，如果有多个本人，则把最小id的本人放在最前\r\n\t\t\t\t\t\t\tthis.persons.sort((a, b) => {\r\n\t\t\t\t\t\t\t\tif (a.relationship === '本人' && b.relationship !== '本人') {\r\n\t\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t\t} else if (a.relationship !== '本人' && b.relationship === '本人') {\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t} else if (a.relationship === '本人' && b.relationship === '本人') {\r\n\t\t\t\t\t\t\t\t\treturn a.id - b.id;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// 查找是否存在 relationship 为 \"本人\" 的对象\r\n\t\t\t\t\t\t\tconst index = this.persons.findIndex(person => person.relationship === \"本人\");\r\n\t\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\t\t// 如果找到了 \"本人\"，则设置索引和 ID\r\n\t\t\t\t\t\t\t\tthis.selectPersonIndex = index;\r\n\t\t\t\t\t\t\t\tthis.selectPersonId = this.persons[index].id;\r\n\t\t\t\t\t\t\t} else if (this.persons.length > 0) {\r\n\t\t\t\t\t\t\t\t// 如果未找到 \"本人\"，但 persons 数组不为空，则默认选择第一个\r\n\t\t\t\t\t\t\t\t// this.selectPersonIndex = 0;\r\n\t\t\t\t\t\t\t\t// this.selectPersonId = this.persons[0].id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.checkPayTypeChange()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.$showMsg(response.msg, 3000);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.$showMsg(error, 3000);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalculateAge(birthday) {\r\n\t\t\t\tconst birthdayDate = new Date(\r\n\t\t\t\t\tbirthday.substr(0, 4),\r\n\t\t\t\t\tbirthday.substr(4, 2) - 1,\r\n\t\t\t\t\tbirthday.substr(6, 2)\r\n\t\t\t\t);\r\n\t\t\t\r\n\t\t\t\tconst currentDate = new Date();\r\n\t\t\t\tconst ageInMillis = currentDate - birthdayDate;\r\n\t\t\t\r\n\t\t\t\t// 计算年龄\r\n\t\t\t\tconst ageInYears = Math.floor(ageInMillis / (365 * 24 * 60 * 60 * 1000));\r\n\t\t\t\treturn ageInYears;\r\n\t\t\t},\r\n\t\t\t//初始化配送方式\r\n\t\t\tturntypeToDefault(){\r\n\t\t\t\tthis.cautionText = '';\r\n\t\t\t\tthis.selectValue = 0;\r\n\t\t\t\tthis.selectText = '请点击此处选择...';\r\n\t\t\t\tthis.shippingFee = 0.00;\r\n\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t},\r\n\t\t\t//打开选择配送方式的弹出层\r\n\t\t\topenSelectType(){\r\n\t\t\t\tthis.$refs.popupShipping.open('center');\r\n\t\t\t},\r\n\t\t\t//用户点击其中某一个配送方式后，将其放到前端显示的系统中\r\n\t\t\tcheckType(item){\r\n\t\t\t\tthis.cautionText = item.caution;\r\n\t\t\t\tthis.selectValue = item.value;\r\n\t\t\t\tthis.selectText = item.text;\r\n\t\t\t\tthis.feeOrigin.forEach(option => {\r\n\t\t\t\t\tif (option.type === this.selectText) {\r\n\t\t\t\t\t\tthis.shippingFee = option.Fee;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\tthis.$refs.popupShipping.close();\r\n\t\t\t},\r\n\t\t\tshowImg(url){\r\n\t\t\t\tvar that = this\r\n\t\t\t\t// 预览图片\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [url],\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\titemList: ['发送给朋友', '保存图片', '收藏'],\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//用户点击商店名称后，自动跳转到该药房的详情页面\r\n\t\t\tgoToShop(items){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/shop_certificate/shop_certificate?shopName=' + encodeURIComponent(JSON.stringify(items.shopName)) \r\n\t\t\t\t\t\t+ '&shopId=' + encodeURIComponent(JSON.stringify(items.shopId))\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 2023-09-03 下拉选择配送方式的方法先进行注释，目前使用的是弹出选择配送方式的形式\r\n\t\t\tselectChanged(e){\r\n\t\t\t\tthis.$refs.popupShipping.open('center');\r\n\t\t\t\tlet selectedOption = this.selectRange.find(option => option.value === this.selectValue);\r\n\t\t\t\tthis.selectText = selectedOption ? selectedOption.text : '';\r\n\t\t\t\tthis.feeOrigin.forEach(item => {\r\n\t\t\t\t\tif (item.type === this.selectText) {\r\n\t\t\t\t\t\tthis.shippingFee = item.Fee;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(this.selectText === \"请选择\"){\r\n\t\t\t\t\tthis.shippingFee = 0.00;\r\n\t\t\t\t}\r\n\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\tif(this.selectText === \"跑腿（第三方）\"){\r\n\t\t\t\t\tthis.cautionText = \"药房营业时间内订单，收到订单15分钟内完成打包，并交由跑腿（第三方）配送。\"\r\n\t\t\t\t}else if (this.selectText === \"快递邮寄\"){\r\n\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\tthis.cautionText = \"药房营业时间内订单，当天完成发货。\"\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.cautionText = \"药房营业时间外订单，第二天营业开始2小时内完成发货。\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if (this.selectText === \"药房自配\"){\r\n\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\tthis.cautionText = \"药房营业时间内订单，2小时内完成配送。\"\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.cautionText = \"药房营业时间外订单，第二天营业开始2小时内完成配送。\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if (this.selectText === \"到店自取\"){\r\n\t\t\t\t\tthis.cautionText = \"药房收到订单后20分钟内完成订单打包，顾客凭订单号到店取药。\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tfatherMethods(e) {\r\n\t\t\t\tconsole.log('父组件方法', e); // 父组件方法\r\n\t\t\t\tthis.addOver(e)\r\n\t\t\t},\r\n\t\t\t//添加用药人结束后执行的方法\r\n\t\t\taddOver(res) {\r\n\t\t\t\t// this.getGoodsUser()\r\n\t\t\t\tthis.$refs.popup.close();\r\n\t\t\t},\r\n\t\t\t// 提交订单\r\n\t\t\tsubmitOrder() {\r\n\t\t\t\t\r\n\t\t\t\tuni.requestSubscribeMessage({\r\n\t\t\t\t\t//此处填写申请模板的模板ID\r\n\t\t\t\t\ttmplIds: ['JZGbfSSv0-jB5yS4GObkqD0TUrPqDdAbalAcz70xjZg'],\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t})\r\n\t\t\t\t//先进行合规检查\r\n\t\t\t\tif (!this.checkboxSelected) {\r\n\t\t\t\t\tuni.$showMsg(\"请先阅读并同意《商品验收标准》，谢谢！\", 3000);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.selectText === '' || this.selectText === \"请点击此处选择...\"){\r\n\t\t\t\t\tuni.$showMsg(\"请先选择配送方式再结算\", 3000);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.selectedAddress.address === '请点击此处选择收货地址') {\r\n\t\t\t\t\tuni.$showMsg(\"请先选择收货地址再结算\", 3000);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (Number(this.totalPrice) === Number(this.shippingFee)){\r\n\t\t\t\t\tuni.$showMsg(\"亲，您购买的药品没货了，请联系药房补货\", 3000);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.validSubmit=false\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"请稍等...\",\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(this.locationId);\r\n\t\t\t\t//先要获取一下最新的库存和价格，如果价格和库存不一致的话需要进行提示用户\r\n\t\t\t\tthis.realTimePricing = this.shops[0].drugs.map(drug => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tgoodsId: drug.drugId,\r\n\t\t\t\t\t\tgoodsOuterId: drug.drugId,\r\n\t\t\t\t\t\tshopId: this.shops[0].shopId\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tthis.getRealTimePricing();\r\n\t\t\t},\r\n\t\t\t//获取准备购买商品的实时价格和库存\r\n\t\t\tasync getRealTimePricing() {\r\n\t\t\t\tconst url = '/api/Goods/getShopSellGoodsInfo';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tBody: JSON.stringify(this.realTimePricing),\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tthis.priceMatch = false;\r\n\t\t\t\t\tthis.canNext = false;\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tconst realTimePriceArray = response.data;\r\n\t\t\t\t\t\tconsole.log(\"比较数据\");\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(realTimePriceArray));\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(this.shops[0]));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// for(let drug of this.shops[0].drugs) {\r\n\t\t\t\t\t\t// \tlet match = realTimePriceArray.find(item => item.goodsId === drug.drugId && item\r\n\t\t\t\t\t\t// \t\t.shopId === this.shops[0]\r\n\t\t\t\t\t\t// \t\t.shopId);\r\n\t\t\t\t\t\t// \tif (match) {\r\n\t\t\t\t\t\t// \t\tif (drug.num <= match.inventory && drug.price === match.price) {\r\n\t\t\t\t\t\t// \t\t\tconsole.log('购买库存和价格一致，无需同步，drugId: ' + drug.drugId);\r\n\t\t\t\t\t\t// \t\t\tthis.priceMatch = true;\r\n\t\t\t\t\t\t// \t\t\tthis.canNext = true;\r\n\t\t\t\t\t\t// \t\t} else {\r\n\t\t\t\t\t\t// \t\t\tthis.priceMatch = false;\r\n\t\t\t\t\t\t// \t\t\tthis.canNext = true;\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t// \t\tthis.canNext = false;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \t//如果完全没有匹配上，则不允许再继续支付\r\n\t\t\t\t\t\t// \tif (this.canNext === false) {\r\n\t\t\t\t\t\t// \t\tuni.$showMsg(\"未查询到所购买商品的价格和库存信息\", 3000);\r\n\t\t\t\t\t\t// \t\tthis.validSubmit=true\r\n\t\t\t\t\t\t// \t\treturn;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \t//如果只是部分商品没有匹配上，那需要提示用户，并进行更新库存和价格\r\n\t\t\t\t\t\t// \tif (this.priceMatch === false) {\r\n\t\t\t\t\t\t// \t\tvar that = this;\r\n\t\t\t\t\t\t// \t\t//TODO：同步云找药库存价格表\r\n\t\t\t\t\t\t// \t\tlet match = realTimePriceArray.find(item => item.goodsId === drug\r\n\t\t\t\t\t\t// \t\t\t.drugId && item\r\n\t\t\t\t\t\t// \t\t\t.shopId === this.shops[0].shopId);\r\n\t\t\t\t\t\t// \t\tif (match) {\r\n\t\t\t\t\t\t// \t\t\t//(调低)如果云找药价格高于智慧药房价格，则提示用户价格高于后台数据\r\n\t\t\t\t\t\t// \t\t\t//match是智慧药房的价格和库存\r\n\t\t\t\t\t\t// \t\t\t//drug是云找药的价格和购买数量\r\n\t\t\t\t\t\t// \t\t\tif (drug.price >= match.price) {\r\n\t\t\t\t\t\t// \t\t\t\tthis.allMatch = false;\r\n\t\t\t\t\t\t// \t\t\t\tdrug.price = match.price;\r\n\t\t\t\t\t\t// \t\t\t\tconsole.log('(调低)价格同步：drugId: ' + drug.drugId);\r\n\t\t\t\t\t\t// \t\t\t}\r\n\t\t\t\t\t\t// \t\t\t//(调高)如果云找药价格低于智慧药房价格，则提示用户价格低于后台数据，退出\r\n\t\t\t\t\t\t// \t\t\t//match是智慧药房的价格和库存\r\n\t\t\t\t\t\t// \t\t\t//drug是云找药的价格和购买数量\r\n\t\t\t\t\t\t// \t\t\telse if (drug.price < match.price){\r\n\t\t\t\t\t\t// \t\t\t\tthis.allMatch = false;\r\n\t\t\t\t\t\t// \t\t\t\tconsole.log('(调高)价格同步：drugId: ' + drug.drugId);\r\n\t\t\t\t\t\t// \t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t// \t\t\t\t\tduration: 5000,\r\n\t\t\t\t\t\t// \t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t// \t\t\t\t\ttitle: '请注意，当前价格低于后台价格，请重新选择商品购买',\r\n\t\t\t\t\t\t// \t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t// \t\t\t\t});\r\n\t\t\t\t\t\t// \t\t\t\tthat.canNext = false;\r\n\t\t\t\t\t\t// \t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t// \t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t// \t\t\t\t\t\turl:'/pages/shopping_cart/shopping_cart'\r\n\t\t\t\t\t\t// \t\t\t\t\t})\r\n\t\t\t\t\t\t// \t\t\t\t}, 5000);\r\n\t\t\t\t\t\t// \t\t\t\tthis.updatePriceAndInventoryToYzy(realTimePriceArray);\r\n\t\t\t\t\t\t// \t\t\t\tthis.validSubmit=true\r\n\t\t\t\t\t\t// \t\t\t\treturn;\r\n\t\t\t\t\t\t// \t\t\t}\r\n\t\t\t\t\t\t// \t\t\tif (drug.num > match.inventory) {\r\n\t\t\t\t\t\t// \t\t\t\tthis.allMatch = false;\r\n\t\t\t\t\t\t// \t\t\t\tdrug.num = match.inventory;\r\n\t\t\t\t\t\t// \t\t\t\tconsole.log('购买数量同步：drugId: ' + drug.drugId);\r\n\t\t\t\t\t\t// \t\t\t}\r\n\t\t\t\t\t\t// \t\t} \r\n\t\t\t\t\t\t// \t\tuni.$showMsg(\"请留意，因后台数据变化，价格和数量存在变动\", 3000);\r\n\t\t\t\t\t\t// \t\tthis.calcTotalPrice();\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// //如果不能下一步，一定要进行控制，否则用户会重复提交\r\n\t\t\t\t\t\t// if(this.allMatch === false || this.canNext === false){\r\n\t\t\t\t\t\t// \t//在这里对数据进行保存，即将智慧药房返回回来的数据重新保存到云找药\r\n\t\t\t\t\t\t// \tthis.updatePriceAndInventoryToYzy(realTimePriceArray);\r\n\t\t\t\t\t\t// \tthis.validSubmit=true\r\n\t\t\t\t\t\t// \treturn;\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\tthis.priceMatch  = true\r\n\t\t\t\t\t\tthis.canNext = true\r\n\t\t\t\t\t\tif (this.priceMatch === true && this.canNext === true) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(this.selectPayValue=='微信支付'){\r\n\t\t\t\t\t\t\t\tthis.Pay();\r\n\t\t\t\t\t\t\t}else if(this.selectPayValue=='微信医保支付'){\r\n\t\t\t\t\t\t\t\tthis.yinhaiPay()\r\n\t\t\t\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\t\t\t\t// uni.$showMsg(\"医保支付暂未开通\", 2000);\r\n\t\t\t\t\t\t\t\t// this.validSubmit=true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.validSubmit=true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"-99\" + response.result);\r\n\t\t\t\t\t\tuni.$showMsg(response.result, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.$showMsg(error, 3000);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//将智慧药房返回的价格信息重新同步回云找药系统中\r\n\t\t\tasync updatePriceAndInventoryToYzy(realTimePriceArray) {\r\n\t\t\t\tconst url = '/api/shop/updatePriceAndInventoryToYzy';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\trealTimePriceArray: realTimePriceArray\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tconsole.log(\"价格&库存同步成功！\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"-99\" + response.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync yinhaiPay(){\r\n\t\t\t\tconst transformedDrugs = this.shops[0].drugs.map(drug => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: drug.id,\r\n\t\t\t\t\t\tgoodsId: drug.drugId,\r\n\t\t\t\t\t\tnum: drug.num,\r\n\t\t\t\t\t\tprice: drug.price\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst url = '/api/Trade/yinHaiPay';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\topenid: uni.getStorageSync(\"openid\"),\r\n\t\t\t\t\tshopId: this.shops[0].shopId,\r\n\t\t\t\t\tgoodsList: transformedDrugs,\r\n\t\t\t\t\tlocationId: this.locationId,\r\n\t\t\t\t\tmemo: this.memo,\r\n\t\t\t\t\tshippingFee: this.shippingFee,\r\n\t\t\t\t\ttype: this.selectText,\r\n\t\t\t\t\tpayType: this.selectPayValue,\r\n\t\t\t\t\tgoodsUserId:this.selectPersonId,\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\t//this.requestWxPay(response.data, response.data.main_order_id)\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\turl:'/subPackage_yinhai/yinhaiPay/yinhaiPay?orderInfo='+encodeURIComponent(JSON.stringify(response.data))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '创建订单失败:'+response.msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.validSubmit=true\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '服务器出错了'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.validSubmit=true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//拉起微信支付\r\n\t\t\tasync Pay() {\r\n\t\t\t\t\r\n\t\t\t\tconst transformedDrugs = this.shops[0].drugs.map(drug => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: drug.id,\r\n\t\t\t\t\t\tgoodsId: drug.drugId,\r\n\t\t\t\t\t\tnum: drug.num,\r\n\t\t\t\t\t\tprice: drug.price\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tconst url = '/api/Trade/wechatPay';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\topenid: uni.getStorageSync(\"openid\"),\r\n\t\t\t\t\tshopId: this.shops[0].shopId,\r\n\t\t\t\t\tgoodsList: transformedDrugs,\r\n\t\t\t\t\tlocationId: this.locationId,\r\n\t\t\t\t\tmemo: this.memo,\r\n\t\t\t\t\tshippingFee: this.shippingFee,\r\n\t\t\t\t\ttype: this.selectText\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tthis.requestWxPay(response.data, response.data.main_order_id)\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '创建订单失败'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '服务器出错了'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trequestWxPay(data, main_order_id) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: 'wxpay', //支付类型-固定值\r\n\t\t\t\t\ttimeStamp: data.timeStamp, // 时间戳（单位：秒）\r\n\t\t\t\t\tnonceStr: data.nonceStr, // 随机字符串\r\n\t\t\t\t\tpackage: data.package, // 固定值\r\n\t\t\t\t\tsignType: data.signType, //固定值\r\n\t\t\t\t\tpaySign: data.paySign, //签名\r\n\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(\"支付成功\");\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.testQueryPay(data.out_order_id, main_order_id) //支付成功后查询一下微信支付订单状态\r\n\t\t\t\t\t\tthat.shops = null;\r\n\t\t\t\t\t\t//跳转支付成功的页面\r\n\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\turl:'/pages/payment_success/payment_success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.validSubmit = true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t// console.log('fail:' + JSON.stringify(err));\r\n\t\t\t\t\t\tconsole.log(\"支付失败\");\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '支付失败'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//用户未支付则发一个通知\r\n\t\t\t\t\t\tthat.testQueryPay(data.out_order_id, main_order_id) //支付成功后查询一下微信支付订单状态\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl:'/pages/user_order/user_order?num=test1'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthat.validSubmit = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//测试查询支付\r\n\t\t\tasync testQueryPay(out_order_id, main_order_id) {\r\n\t\t\t\tconst url = '/api/example/testQueryPayOrder';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\topenid: uni.getStorageSync(\"openid\"),\r\n\t\t\t\t\tmain_order_id: main_order_id,\r\n\t\t\t\t\tout_order_id: out_order_id,\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tconsole.log(\"真实的response.msg\")\r\n\t\t\t\t\t\tconsole.log(response.msg);\r\n\t\t\t\t\t\tconsole.log('operateId：' + response.data.operateId);\r\n\t\t\t\t\t\tthis.uploadOrderToZhyf(response.msg, response.data.operateId);\r\n\t\t\t\t\t\tconsole.log('查询成功并回填数据库成功！');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//上传智慧药房做账\r\n\t\t\tasync uploadOrderToZhyf(msg, operateId) {\r\n\t\t\t\tconst msgJson = JSON.parse(msg);\r\n\t\t\t\tmsgJson.operateId = operateId;\r\n\t\t\t\tconsole.log(JSON.stringify(msgJson));\r\n\t\t\t\tconst url = '/api/Zhyf/makeAccountForOuterOrder';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = JSON.stringify(msgJson);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tconst response = await requestZhyf('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tconsole.log(\"销售记录上传智慧药房成功！\");\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//当复选框的选中项变更时触发\r\n\t\t\tcheckboxChange() {\r\n\t\t\t\tthis.checkboxSelected = !this.checkboxSelected;\r\n\t\t\t},\r\n\t\t\topenReadText() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/agreement_order/agreement_order'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbindTextAreaBlur: function(e) {\r\n\t\t\t\tthis.memo = e.detail.value;\r\n\t\t\t\tconsole.log(e.detail.value);\r\n\t\t\t},\r\n\t\t\tcalcTotalPrice() {\r\n\t\t\t\t//总价\r\n\t\t\t\tconst drugsWithTotal = this.shops.map(shop => ({\r\n\t\t\t\t\t...shop,\r\n\t\t\t\t\tdrugs: shop.drugs.map(drug => ({\r\n\t\t\t\t\t\t...drug,\r\n\t\t\t\t\t\ttotal: drug.num * drug.price\r\n\t\t\t\t\t}))\r\n\t\t\t\t}))\r\n\t\t\t\tconst shopsWithTotal = drugsWithTotal.map(shop => ({\r\n\t\t\t\t\t...shop,\r\n\t\t\t\t\ttotal: shop.drugs.reduce((acc, drug) => acc + drug.total, 0)\r\n\t\t\t\t}));\r\n\t\t\t\tconst total = shopsWithTotal.reduce((acc, shop) => acc + shop.total, 0);\r\n\r\n\t\t\t\t//商品总数量\r\n\t\t\t\tconst drugs = this.shops.flatMap(shop =>\r\n\t\t\t\t\tshop.drugs.map(drug => drug.num)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst totalNum = drugs.reduce((a, b) => a + b, 0);\r\n\t\t\t\tconsole.log(this.shippingFee);\r\n\t\t\t\t\r\n\t\t\t\t//2023-09-06\r\n\t\t\t\t//前端浮点型计算例子\r\n\t\t\t\tlet originalTotalPrice = total + this.shippingFee;\r\n\t\t\t\t// 将浮点数转换为字符串\r\n\t\t\t\tlet priceString = originalTotalPrice.toString();\r\n\t\t\t\t// 使用正则表达式提取整数位和小数点后两位\r\n\t\t\t\tlet match = priceString.match(/^-?\\d+(?:\\.\\d{0,2})?/);\r\n\t\t\t\t// 提取的结果即为整数位和小数点后两位\r\n\t\t\t\tlet truncatedPrice = match ? match[0] : \"\";\r\n\t\t\t\tthis.totalPrice = truncatedPrice;\r\n\t\t\t\t\r\n\t\t\t\tthis.totalNum = totalNum;\r\n\t\t\t},\r\n\t\t\t//获取用户的地址信息\r\n\t\t\tasync getAddressList() {\r\n\t\t\t\tconst url = '/api/user/getAddressList';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\topenid: uni.getStorageSync(\"openid\")\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.code == 99) {\r\n\t\t\t\t\t\tconsole.log(\"99\" + response.result);\r\n\t\t\t\t\t\tthis.selectedAddress = response.data.data[0];\r\n\t\t\t\t\t\tthis.selectedAddress.phone = response.data.data[0].tel;\r\n\t\t\t\t\t\tthis.selectedAddress.address = response.data.data[0].details;\r\n\t\t\t\t\t\tconsole.log(this.selectedAddress);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"-99\" + response.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowAddFrame() {\r\n\t\t\t\tthis.$refs.popup.open('center');\r\n\t\t\t},\r\n\t\t\t//2023-08-30 更新配送体系上线\r\n\t\t\t//获取用户的地址信息\r\n\t\t\tasync getShopShippingFee() {\r\n\t\t\t\tconst url = '/api/shop/getShopShippingFee';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tshopId: this.shops[0].shopId,\r\n\t\t\t\t\taddressId: this.locationId\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log('ShippingFee');\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.data.flag == 99) {\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t//获取配送方式及其费用\r\n\t\t\t\t\t\tthis.feeOrigin = response.data.data;\r\n\t\t\t\t\t\t//初始化下拉选择框\r\n\t\t\t\t\t\tthis.selectRange = [];\r\n\t\t\t\t\t\t//初始化配送距离\r\n\t\t\t\t\t\tthis.distance = response.data.distance;\r\n\t\t\t\t\t\t//初始化门店的营业时间\r\n\t\t\t\t\t\tthis.businessHours = response.data.businessHours;\r\n\t\t\t\t\t\t//初始化当前是否在门店的营业时间中\r\n\t\t\t\t\t\tif(response.data.isShopping === \"true\"){\r\n\t\t\t\t\t\t\tthis.isShopping = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isShopping = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//先按照Fee从小到大排序\r\n\t\t\t\t\t\tthis.feeOrigin.sort((a, b) => a.Fee - b.Fee);\r\n\t\t\t\t\t\t//把排序后的数据放回到下拉选择框中\r\n\t\t\t\t\t\tthis.feeOrigin.forEach(item => {\r\n\t\t\t\t\t\t\tvar cautionTextVar = '';\r\n\t\t\t\t\t\t\t//初始化提示信息\r\n\t\t\t\t\t\t\tif(item.type === \"跑腿（第三方）\"){\r\n\t\t\t\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"内订单，收到订单15分钟内完成打包，并交由跑腿（第三方）配送。\"\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"外订单，第二天营业开始15分钟内完成打包，并交由跑腿（第三方）配送。\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else if (item.type === \"快递邮寄\"){\r\n\t\t\t\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"内订单，当天完成发货。\"\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"外订单，第二天营业开始2小时内完成发货。\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else if (item.type === \"药房自配\"){\r\n\t\t\t\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"内订单，2小时内完成配送。\"\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"外订单，第二天营业开始2小时内完成配送。\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else if (item.type === \"到店自取\"){\r\n\t\t\t\t\t\t\t\tif(this.isShopping){\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"内订单，药房收到订单后20分钟内完成订单打包，顾客凭订单号到店取药。\"\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tcautionTextVar = that.businessHours + \"外订单，第二天营业开始20分钟内完成订单打包，顾客凭订单号到店取药。\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.selectRange.push({value: item.id, text: item.type, price: '￥'+item.Fee.toFixed(2), caution: cautionTextVar});\r\n\t\t\t\t\t\t\tcautionTextVar = '';\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//如果是冷链药物的处理\r\n\t\t\t\t\t\tif(this.coldFlag === true){\r\n\t\t\t\t\t\t\tthis.selectRange = this.selectRange.filter(item => item.text === \"药房自配\" || item.text === \"到店自取\" || item.text === \"请选择\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.calcTotalPrice();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"-99\" + response.data.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//2023-09-01 获取当前品种的冷链信息\r\n\t\t\tasync getGoodsColdFlag() {\r\n\t\t\t\tconst coldDrugsCheck = this.shops[0].drugs.map(drug => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tgoodsId: drug.drugId\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tconst url = '/api/goods/getGoodsColdFlag';\r\n\t\t\t\tconst method = 'POST';\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tgoodsList: coldDrugsCheck\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(response); //统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif (response.data.flag == 99) {\r\n\t\t\t\t\t\tif (response.data.coldFlag === \"y\"){\r\n\t\t\t\t\t\t\tthis.coldFlag = true;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.coldFlag = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"-99\" + response.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tconst item = JSON.parse(decodeURIComponent(option.drug));\r\n\t\t\tconsole.log(item);\r\n\t\t\tthis.shops = item;\r\n\t\t\tconst allHaveYFlag = this.shops[0].drugs.every(obj => obj.healthInsuranceFlag == 'y');\r\n\t\t\t\r\n\t\t\tif (allHaveYFlag) {\r\n\t\t\t\t//是否可医保支付\r\n\t\t\t    this.MedicarePaymentFlag = true\r\n\t\t\t\tthis.selectPayRange = [{\"value\": '微信支付', \"text\": \"微信支付\"},{\"value\": '微信医保支付', \"text\": \"微信医保支付\"}]\r\n\t\t\t} else {\r\n\t\t\t    this.MedicarePaymentFlag = false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tuni.$on('pageClosedLocation', (data) => {\r\n\t\t\t\tconsole.log(\"pageClosedLocation\");\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tthis.selectedAddress.name = data.name;\r\n\t\t\t\tthis.selectedAddress.phone = data.tel;\r\n\t\t\t\tthis.selectedAddress.address = data.details;\r\n\t\t\t\tthis.selectedAddress.city = data.city;\r\n\t\t\t\tthis.locationId = data.id;\r\n\t\t\t\tconsole.log(\"this.locationId:\" + this.locationId);\r\n\t\t\t\tthis.turntypeToDefault();\r\n\t\t\t\tthis.getGoodsColdFlag();\r\n\t\t\t\tthis.getShopShippingFee();\r\n\t\t\t});\r\n\t\t\tuni.$on('addressUpdated', (data) => {\r\n\t\t\t\tthis.getAddressList();\r\n\t\t\t\tconsole.log(\"获取地址成功！\");\r\n\t\t\t\tthis.$refs.child.getAddressList();\r\n\t\t\t});\r\n\t\t\tuni.$on('pageClosedAddress', (data) => {\r\n\t\t\t\tthis.getAddressList();\r\n\t\t\t\tconsole.log('pageClosedAddress: FromSelect');\r\n\t\t\t\tthis.$refs.child.getAddressList();\r\n\t\t\t});\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\t// 在页面销毁时取消事件监听\r\n\t\t\tuni.$off('pageClosedLocation');\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.star-sign {\r\n\t\tcolor: red;\r\n\t\tpadding-right: 10rpx;\r\n\t}\r\n\t.person-item {\r\n\t\twidth: 25%;\r\n\t\tbackground-color: #F9F9F9;\r\n\t\tpadding: 6rpx 30rpx 6rpx 12rpx;\r\n\t\tmargin: 24rpx 12rpx 12rpx 8rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tborder: #FFFFFF solid 4rpx;\r\n\t\tcolor: gray;\r\n\t}\r\n\t\r\n\t.person-name {\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\t\r\n\t.person-row {\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\t.more-person-icon {\r\n\t\twidth: 20rpx;\r\n\t\theight: 20rpx;\r\n\t}\r\n\t\r\n\t.select-person-title,\r\n\t.disease-list-title {\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 36rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\t.persong-item-selected {\r\n\t\tbackground-color: #1296DB;\r\n\t\twidth: 25%;\r\n\t\tpadding: 6rpx 30rpx 6rpx 12rpx;\r\n\t\tmargin: 24rpx 12rpx 12rpx 8rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tborder: #1296DB solid 4rpx;\r\n\t\tcolor: white;\r\n\t}\r\n\t.person-age {\r\n\t\t\tpadding-left: 20rpx;\r\n\t\t}\r\n\t.more-person {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\t\r\n\t.select-person-firstline {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.select-person,\r\n\t.disease-list {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-radius: 24rpx;\r\n\t\tpadding: 24rpx 24rpx;\r\n\t\tmargin: 36rpx 24rpx 24rpx;\r\n\t}\r\n\t\r\n\t.more-person-icon {\r\n\t\tpadding: 0 10rpx;\r\n\t}\r\n\t.yb-tag{\r\n\t\t    max-width: 69px;\r\n\t\t    line-height: 24rpx;\r\n\t\t    padding: 1px 3px;\r\n\t\t    border: #0aa71a solid 1px;\r\n\t\t    border-radius: 7px;\r\n\t\t    text-align: center;\r\n\t\t    align-items: center;\r\n\t\t    justify-content: center;\r\n\t\t    display: flex;\r\n\t\t    background: #0aa71a;\r\n\t\t    color: white;\r\n\t\t    font-size: 24rpx;\r\n\t}\r\n\t.form-container-shipping {\r\n\t\tpadding: 10rpx 20rpx 0 20rpx;\r\n\t}\r\n\t\r\n\t.form-container {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10upx;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\t\r\n\t.form-item-caution{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\r\n\t.label {\r\n\t\twidth: 140rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.line {\r\n\t\theight: 1upx;\r\n\t\tbackground-color: #ccc;\r\n\t\tmargin: 10upx 0;\r\n\t}\r\n\r\n\tpage {\r\n\t\tbackground-color: #F7FCFF;\r\n\t}\r\n\r\n\t.address-name-phone {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.address-card {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 20rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t}\r\n\r\n\t.address-info {\r\n\t\tflex: 1;\r\n\t\tpadding: 0 10rpx;\r\n\t}\r\n\r\n\t.address-name {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.address-phone {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #636263;\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\r\n\t.address-details {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #636263;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.address-details-road {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #636263;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.confirm-order {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.order-list {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t}\r\n\r\n\t.order-item {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.shop-name {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 800;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tpadding-top: 10rpx;\r\n\t\tpadding-left: 6rpx;\r\n\t}\r\n\r\n\t.item-list {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 20rpx;\r\n\t\tborder-radius: 32rpx;\r\n\t}\r\n\r\n\t.item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 20rpx;\r\n\t\tborder-radius: 32rpx;\r\n\t}\r\n\r\n\t.item-info {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.item-details {\r\n\t\t    max-width: 55%;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.item-name {\r\n\t\twidth: 375rpx;\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\tline-height: 40rpx;\r\n\t}\r\n\r\n\t.item-spec {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.item-manu{\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.item-price {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #f00;\r\n\t}\r\n\r\n\t.item-quantity {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999;\r\n\t\tfont-weight: bold;\r\n\t\tpadding-left: 6rpx;\r\n\t}\r\n\r\n\timage {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t}\r\n\r\n\t.item-detail-right {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-items: right;\r\n\t\twidth: 140rpx;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.more-location-icon {\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\r\n\t.tabbar {\r\n\t\twidth: 100%;\r\n\t\theight: 220rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tposition: fixed;\r\n\t\tbottom: -5rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-left: -16rpx;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.total-price {\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: right;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\twidth: 240rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: #1296DB;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\theight: 100rpx;\r\n\t\tline-height: 100rpx;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.total-price-num {\r\n\t\tcolor: red;\r\n\t\tfont-size: 48rpx;\r\n\t\tfont-weight: bold;\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n\r\n\t.total-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.caution-card {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: left;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 20rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tmargin: 24rpx 0;\r\n\t}\r\n\r\n\t.caution-title {\r\n\t\tcolor: #1296DB;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.caution-content {\r\n\t\tcolor: #636263;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.checkbox-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 36rpx 0 10rpx 0;\r\n\t}\r\n\r\n\t.tabbar-commit {\r\n\t\tdisplay: flex;\r\n\t\tmargin-left: auto;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.blank {\r\n\t\theight: 200rpx;\r\n\t}\r\n\r\n\t.memo {\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-left: -10rpx;\r\n\t}\r\n\r\n\t.card-shadow {\r\n\t\tbox-shadow: 2px -1px 10px 0.5px rgba(0, 0, 0, 0.2);\r\n\t}\r\n\r\n\t.memo-card {\r\n\t\tborder-radius: 24rpx;\r\n\t}\r\n\r\n\t.path-item {\r\n\t\tpadding: 30rpx 20rpx;\r\n\t\tmargin: 20rpx;\r\n\t\tborder-bottom: 2rpx solid #1296DB;\r\n\t\tborder-radius: 10px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\r\n\t.item-main {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/* .active {\r\n\t\tpadding: 0 3rpx;\r\n\t\tborder: 1px solid #1296DB;\r\n\t\tcolor: #1296DB;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 16rpx;\r\n\t} */\r\n\r\n\t.item-name {\r\n\t\tpadding-right: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #000;\r\n\t}\r\n\t\r\n\t.shop-title{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding-left: 10rpx;\r\n\t}\r\n\t\r\n\t.shipping-fee-card{\r\n\t\tbackground-color: #FFF;\r\n\t\tborder-radius: 24rpx;\r\n\t\tpadding: 20rpx 0;\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.shipping-select{\r\n\t\tdisplay: flex;\r\n\t\twidth: 520rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\t\r\n\t.shipping-type-tag-list{\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\t\r\n\t.shipping-type-tag {\r\n\t\tpadding: 16rpx 10rpx;\r\n\t}\r\n\t\r\n\t.label-word{\r\n\t\twidth: 140rpx;\r\n\t\theight: 50rpx;\r\n\t\ttext-align: justify;\r\n\t}\r\n\t\r\n\t/* .label-word::after{\r\n\t\twidth: 100%;\r\n\t\tdisplay: inline-block;\r\n\t\tcontent: '';\r\n\t} */\r\n\t\r\n\t.popupShipping-panel{\r\n\t\tpadding: 15px;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 15px;\r\n\t\twidth: 90vw;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.panel-item{\r\n\t\tpadding: 30rpx 20rpx;\r\n\t\tmargin: 10rpx 20rpx 10rpx 20rpx;\r\n\t\tborder: 1rpx solid #1296DB;\r\n\t\tborder-radius: 10px;\r\n\t\tbackground-color: #fff;\r\n\t\tcolor: #fff;\r\n\t\tbox-shadow: 2px -1px 10px 0.5px rgba(0, 0, 0, 0.2);\r\n\t\twidth: 595rpx;\r\n\t}\r\n\t\r\n\t.panel-item-main{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.item-type-popup {\r\n\t\tpadding-right: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #000;\r\n\t}\r\n\t\r\n\t.item-type-price {\r\n\t\tpadding-left: 40rpx;\r\n\t\tcolor: red;\r\n\t\tmargin-left: auto;\r\n\t\tpadding-right: 50rpx;\r\n\t}\r\n\t\r\n\t.item-type-caution {\r\n\t\tcolor: #000;\r\n\t}\r\n\t\r\n\t.item-type-name{\r\n\t\tpadding-left: 20rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.caution-caution{\r\n\t\tdisplay: flex;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t\r\n\t.type-choose{\r\n\t\tdisplay: flex;\r\n\t\twidth: 520rpx;\r\n\t\theight: 56rpx;\r\n\t\tborder: 1rpx solid #ccc;\r\n\t\tborder-radius: 10rpx;\r\n\t\tmargin-left: 10rpx;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding-right: 20rpx;\r\n\t}\r\n\t\r\n\t.type-choose-text{\r\n\t\tmargin-left: 14rpx;\r\n\t\tcolor: #636263;\r\n\t\tfont: 30rpx;\r\n\t\tfont-style: italic;\r\n\t}\r\n\t\r\n\t.type-choosed-text{\r\n\t\tmargin-left: 14rpx;\r\n\t\tcolor: #000;\r\n\t\tfont: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./confirm_order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./confirm_order.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}
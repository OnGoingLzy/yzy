{"version":3,"sources":["uni-app:///main.js","webpack:///E:/workbench/yzy/yzy_app2.0/pages/search/search.vue?3365","webpack:///E:/workbench/yzy/yzy_app2.0/pages/search/search.vue?efa6","webpack:///E:/workbench/yzy/yzy_app2.0/pages/search/search.vue?a3e2","webpack:///E:/workbench/yzy/yzy_app2.0/pages/search/search.vue?8dca","uni-app:///pages/search/search.vue","webpack:///E:/workbench/yzy/yzy_app2.0/pages/search/search.vue?9bb8"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniTag","uniIcons","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","searchResults","length","g1","l0","__map","filterRule","manufacturer","item","i","$orig","__get_orig","m0","getTagType","l1","goodsName","m1","_isMounted","e0","$event","$refs","popup","close","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","showType","hotList","historyList","showView","searchContent","filterSearchResults","searchTime","isloding","totalNum","choiceBar","searchObj","pageIndex","pageSize","drugsList","sortRule","maySearchList","useFilterRule","useFilter","focus","isCategorySearch","categoryId","goodsCard","goodsCard2","watch","onShow","mounted","onLoad","created","computed","filteredSearchResultsList","methods","toReserveGoods","uni","url","clickFilterRule","title","icon","createfilterRule","uniqueManufacturer","uniqueGoodsName","resetFilterRule","toGoodsSellShop","selectBar","scrollTop","duration","sortSearchResults","searchGoods","that","searchContent1","type","method","res","categorySearchGoods","removeDuplicates","uniqueGoods","onReachBottom","saveSearchHistory","set","getHotGoods","res1","getMaySearch","response","watchInput","clearSearchContent","clearSearchResult"],"mappings":"8IAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0BACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,OAAQ,WACN,OAAO,8EAITC,SAAU,WACR,OAAO,wHAITC,SAAU,WACR,OAAO,qFAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,cAAcC,QACvBC,EAAKT,EAAIO,cAAcC,OACvBE,EAAKV,EAAIW,MAAMX,EAAIY,WAAWC,cAAc,SAAUC,EAAMC,GAC9D,IAAIC,EAAQhB,EAAIiB,WAAWH,GACvBI,EAAKlB,EAAImB,WAAWL,EAAM,QAC9B,MAAO,CACLE,MAAOA,EACPE,GAAIA,MAGJE,EAAKpB,EAAIW,MAAMX,EAAIY,WAAWS,WAAW,SAAUP,EAAMC,GAC3D,IAAIC,EAAQhB,EAAIiB,WAAWH,GACvBQ,EAAKtB,EAAImB,WAAWL,EAAM,OAC9B,MAAO,CACLE,MAAOA,EACPM,GAAIA,MAGHtB,EAAIuB,aACPvB,EAAIwB,GAAK,SAAUC,GACjB,OAAOxB,KAAKyB,MAAMC,MAAMC,UAG5B5B,EAAI6B,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACL7B,GAAIA,EACJK,GAAIA,EACJC,GAAIA,EACJU,GAAIA,MAKRc,GAAmB,EACnBC,EAAkB,GACtBpC,EAAOqC,eAAgB,G,iCC7EvB,yHAAkqB,eAAG,G,gKC0KrqB,qwCACA,CACAN,gBACA,OACAO,cACAC,WACAC,eACAC,iBACAC,iBACAlC,iBACAmC,uBACAC,aACAC,YACAC,YACAC,kBACAC,WACAN,iBACAO,YACAC,YACAC,aACAC,cACAvC,gBAEAwC,iBACAxC,YACAC,gBACAQ,cAEAgC,eACAxC,gBACAQ,cAEAiC,aACAC,SACAC,oBACAC,gBAGAnE,YAAAoE,YAAAC,cACAC,OACAnB,4BACA,OACA,sBACA,qCACA,oBAKAoB,oBAIAC,mBACA,mBACA,oEAEAC,mBAEA,uBACA,sDACA,yBACA,kBACA,+BACAlE,qCAEA,eAIAmE,qBAEAC,UACAC,qCAAA,WAEA,GADArE,oBACA,iDACA,yFACA,mBAIA,uCACA,yCACA,yCAGA,kCACA,sCAGA,gDACA,sCACA,UAOAsE,SAEAC,0BACAC,aACAC,wCAIAC,gCAKA,GAJAF,aACAG,aACAC,cAEA,WACA,iDACA,6BAEA,MAEA,wCAGA,iDAGA,aACA,8CACA,6BAEA,MAEA,qCAGA,yCAIA,kFACA,kBACA,mBAKAtD,yBACA,cACA,4CACA,4BAEA,sBAEA,aACA,yCACA,4BAEA,wBAKAuD,6BACA,cACA,UACAnE,uBACAoE,sBACAC,sBAEA,2CACA,yCAGAC,2BACA,mCACA,gCACA,4CACA,mBAEAC,4BACAT,cACAC,+GAIAS,wBAEA,GADA,+BACA,WACA,uCACA,uBACA,CACA,iBACA,8BAUA,MARA,YACAV,gBACAW,YACAC,eAIA,2CACA,wBACA,uDACA,4CACA,iDACA,iDAGA,2BACA,0DACA,8CACA,mDACA,kDAIA,YACA,oCAGA,kDAGAC,8BACA,YAEArF,eACA,wEAEA,WACA,uEAEA,SACA,2EAEA,aAEAA,eACA,sEAEA,YACA,qEAEA,yBAIAsF,0BAAA,oJAWA,GAVA,mBAEA,sBACAC,IACAC,kBACA,QACAxF,yBACAwF,IACA,kBACA,sBAEA,kDAGA,OAFAxF,wBACA,sBACA,uCACA,oFAGA,qDACA,eACA,wBACA,yBACA,mBACA,+CACAyF,oCAAA,kDAwBA,OAnBA,uBACA,oBAIA,mBACAzF,0BACAuF,4BACAf,eACAG,kBAGAY,4BAGAd,2BACAiB,SACAzD,GACAiB,uBACA,qBAEA,sCAAAyC,SACA3F,eACA,aAEA,oBACA,qFACAuF,6BACA,uCACA,mBAEA,sCAIA,mBACAf,aACAG,iBACAC,aACAQ,iBAGA,yDAEA,2CAIAZ,gBAAA,sDAEAxE,kBACAwE,gBAAA,0DAjFA,IAsFAoB,kCAAA,oJAGA,GAFA,mBACAL,IACAC,IAEA,qDACA,eACA,wBACA,yBACA,mBACA,+CACAC,oCAAA,kDAuBA,OAlBA,oBAIA,mBACAzF,0BACAuF,4BACAf,eACAG,kBAGAY,4BAGAd,2BACAiB,SACAzD,GACAiB,uBACA,qBAEA,sCAAAyC,SACA3F,eACA,aAEA,oBACA,qFACAuF,6BACA,uCACA,mBAEA,qCAKAf,aACAG,iBACAC,aACAQ,gBAGA,yDAEA,2CAIAZ,gBAAA,sDAEAxE,kBACAwE,gBAAA,0DAlEA,IAuEAqB,4BACA,IAEA,EAFA,SAEA,uDACA,sDACA,GACAC,WAHA,+BAKA,8BACA,sBAGAC,yBAEA,mEAMA,OALA/F,2BACAwE,aACAG,eACAC,iBAIA,iBAEA,2BACA5E,oBACA,sBACA,qDAEA,kCAMAgG,8BACAhG,sBAEA,gCAGA,aACA,eACA,sBACAiG,mBACAA,iBAEA,oBACA,YACAA,eAEA,yCAEAzB,gEAGA0B,uBAAA,gJAeA,OAbAX,EAEAd,2BACAiB,SACAzD,GACAiB,WACAN,iBACAO,YACAC,YACAC,aACAC,cACAvC,iBAEA,mBAEA,qCAAAoF,SAEA,YAEA,gBACA,uBAMA,qDAEAnG,kBAAA,yDA9BA,IAkCAoG,wBAAA,gJAKA,OAJA3B,4BACAiB,SACAzD,GACAW,+BACA,mBAEA,qCAAAyD,SACArG,eACA,aACA,6BAGA,qDAEAA,kBAAA,yDAfA,IAmBAsG,sBACA,wBACA,sBACA,qBAEA,uBAGAC,8BACA,sBACA,kBACA,2BACA,6BAEAC,6BACA,kBACA,2BACA,4BACA,yBAGA,c,6DC/rBA,yHAAqvC,eAAG,G","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=template&id=4cedc0c6&\"","var components\ntry {\n  components = {\n    uniTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-tag/components/uni-tag/uni-tag\" */ \"@/uni_modules/uni-tag/components/uni-tag/uni-tag.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.searchResults.length\n  var g1 = _vm.searchResults.length\n  var l0 = _vm.__map(_vm.filterRule.manufacturer, function (item, i) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.getTagType(item, \"生产厂商\")\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  var l1 = _vm.__map(_vm.filterRule.goodsName, function (item, i) {\n    var $orig = _vm.__get_orig(item)\n    var m1 = _vm.getTagType(item, \"品牌名\")\n    return {\n      $orig: $orig,\n      m1: m1,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      return this.$refs.popup.close()\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\r\n\t\t<view style=\"position: fixed;z-index: 999;top: 0;\">\n\t\t\t<view class=\"search-container\">\n\t\t\t\t<view class=\"search-input\">\n\t\t\t\t\t<view style=\"height: 100%;width: 40px;text-align: left;margin-left: 10px;display: flex;align-items: center;\" >\n\t\t\t\t\t<image src=\"../../static/icon/ss.png\" style=\"width: 22px;height: 22px;\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t<input type=\"text\" style=\"width: 80%;\" v-model=\"searchContent\" placeholder=\"药名、品牌、厂家、症状\" ref=\"inputRef\" :focus=\"focus\" @confirm=\"searchGoods('','')\"/>\n\t\t\t\t\t<view style=\"height: 100%;width: 40px;text-align: right: ;\" >\n\t\t\t\t\t<text class=\"voice-icon\" @click=\"clearSearchContent\">×</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view style=\"display: flex;align-item:center;width: 10vw;justify-content: center;\">\n\t\t\t\t\t<text style=\"color: white;line-height:31px\" @click=\"searchGoods('','')\">搜索</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"choice-bar-container\" v-show=\"showView=='view3'\">\n\t\t\t\t<view class=\"choice-bar-item-box\" :class=\"{activeBar : choiceBar === 'test0'}\" @click=\"selectBar('test0')\">\n\t\t\t\t\t<text ref=\"text0\"  :style=\"{ color: choiceBar === 'test0' ? '#1296DB' : 'black' }\" >默认</text>\n\t\t\t\t</view>\t\n\t\t\t\t<view class=\"choice-bar-item-box\" :class=\"{activeBar : choiceBar === 'test1'}\" @click=\"selectBar('test1','price')\">\n\t\t\t\t\t<view style=\"display: flex;align-items: center;\">\n\t\t\t\t\t\t<text ref=\"test1\"  :style=\"{ color: choiceBar === 'test1' ? '#1296DB' : 'black' }\">价格</text>\n\t\t\t\t\t\t\t<text class=\"mini-text\" :style=\"{ color: searchObj.sortRule === '价格降序' ? '#1296DB' : '#777777' }\" v-if=\"searchObj.sortRule === '价格降序'\">↓</text>\n\t\t\t\t\t\t\t<text class=\"mini-text\" :style=\"{ color: searchObj.sortRule === '价格升序' ? '#1296DB' : '#777777' }\" v-if=\"searchObj.sortRule === '价格升序'\">↑</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- <view class=\"choice-bar-item-box\" :class=\"{activeBar : choiceBar === 'test2'}\" @click=\"selectBar('test2','shopsNum')\">\n\t\t\t\t\t<view style=\"display: flex;align-items: center;\">\n\t\t\t\t\t\t<text ref=\"test1\"  :style=\"{ color: choiceBar === 'test2' ? '#1296DB' : 'black' }\">报价数</text>\n\t\t\t\t\t\t\t<text class=\"mini-text\" :style=\"{ color: searchObj.sortRule === '报价数降序' ? '#1296DB' : '#777777' }\">↑</text>\n\t\t\t\t\t\t\t<text class=\"mini-text\" :style=\"{ color: searchObj.sortRule === '报价数升序' ? '#1296DB' : '#777777' }\">↓</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view> -->\n\t\t\t\t\n\t\t\t\t<view class=\"choice-bar-item-box\" @click=\"selectBar('test3')\">\n\t\t\t\t\t<text ref=\"text3\" v-text=\"showType\">大图</text>\n\t\t\t\t</view>\t\n\t\t\t\t<view class=\"choice-bar-item-box\" @click=\"selectBar('test4')\">\n\t\t\t\t\t<text ref=\"text4\"  :style=\"{ color: !useFilter ? 'black' : '#1296DB' }\">筛选</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- view1 搜索框什么都不输入时展示该页面 -->\n\t\t<view class=\"view1\" v-show=\"showView=='view1'\">\n\n\t\t\t<view class=\"history-box\">\n\t\t\t\t<view class=\"history-title\">\n\t\t\t\t\t<text style=\"font-weight: bold;\">热销品种</text>\n\t\t\t\t\t<image class=\"icons\" src=\"/static/icon/fire.png\"></image>\n\t\t\t\t\t<!-- <uni-icons type=\"fire\" size=\"17\"></uni-icons> -->\n\t\t\t\t</view>\n\t\t\t\t<!-- 列表区域 -->\n\t\t\t\t<view class=\"history-list\">\n\t\t\t\t\t<uni-tag :text=\"item.genericName\" v-for=\"(item, i) in hotList\" :key=\"i\" @click=\"searchGoods(item.genericName,'')\" \r\n\t\t\t\t\tcustom-style=\"background-color: #ffffff; border-color: #fcfdff; color: #1b1b1b;\"\r\n\t\t\t\t\t>\t\t\r\n\t\t\t\t\t</uni-tag>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"history-box\">\n\t\t\t\t<view class=\"history-title\">\n\t\t\t\t\t<text style=\"font-weight: bold;\">搜索历史</text>\n\t\t\t\t\t<uni-icons type=\"trash\" size=\"17\" @click=\"clean\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<!-- 列表区域 -->\n\t\t\t\t<view class=\"history-list\">\n\t\t\t\t\t<uni-tag :text=\"item\" v-for=\"(item, i) in historyList\" :key=\"i\" @click=\"searchGoods(item,'')\"></uni-tag>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- view2 搜索框有内容时显示可能出现的药品内容 -->\n\t\t<view class=\"view1\" v-show=\"showView=='view2'\">\r\n\t\t\t<text style=\"font-weight: bold;font-size:17px\">您可能要搜:</text>\n\t\t\t<view v-for=\"(item,i) in maySearchList\" :key=\"i\" style=\"padding: 5px;font-size:17px\" @click=\"searchGoods(item.genericName,'')\">\r\n\t\t\t\t<text v-text=\"item.genericName\"></text>\r\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- view3 搜索后展示商品列表 -->\n\t\t\n\t\t<view class=\"view1\" v-show=\"showType=='列表' && showView=='view3'\" style=\"margin-top:100px\">\n\t\t\t\n\t\t\t<view v-for=\"(goods, i) in filteredSearchResultsList\" :key=\"i\" @click=\"toGoodsSellShop(goods)\" style=\"background: white;border-radius: 15px;\">\n\t\t\t\t<!-- <goodsCard :goods=\"goods\" ></goodsCard> -->\n\t\t\t\t<goods-card :goods=\"goods\" :from=\"'fromSelect'\"></goods-card>\t\t\n\t\t\t</view>\r\n\t\t\t<view v-if=\"searchResults.length==0\" style=\"text-align: center;\">\r\n\t\t\t\t<view style=\"\">\r\n\t\t\t\t\t<image src=\"../../static/img/empty3.svg\" style=\"width: 30vw;height: 30vw;margin-top: 60px;\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text style=\"color: gray;\">没有查询到数据</text>\r\n\t\t\t\t\t<text style=\"color: gray;\" v-text=\"'\\n请点击右下预订药品或联系客服'\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\r\n\r\n\t\t\t<view style=\"width: 30vw;position: relative;bottom: -30vw;left: 70vw;display: flex;justify-content: center;align-items: center;\" v-if=\"searchResults.length==0\">\r\n\t\t\t\t<view style=\"text-align: center;    padding: 5px;background: white;border-radius: 50px;\">\r\n\t\t\t\t\t<view style=\"width: 100%;border-radius: 50%;   \">\r\n\t\t\t\t\t\t<image src=\"../../static/icon/客服.svg\" class=\"icon-class\" style=\"width: 10vw;height: 10vw;\">\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<button open-type=\"contact\" plain=\"true\" class=\"bt_contact\" style=\"border: none;\"></button>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button open-type=\"contact\" plain=\"true\" class=\"bt_contact\" style=\"border: none;\"></button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"line-height: 15px;\"><text style=\"font-size: 11px;\">联系客服</text></view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view style=\"width: 100%;border-radius: 50%;    line-height: 15px;\" @click=\"toReserveGoods\">\r\n\t\t\t\t\t\t<image src=\"../../static/tabbar/goods_order.png\" class=\"icon-class\" style=\"width: 10vw;height: 10vw;\">\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"line-height: 15px;\"><text style=\"font-size: 11px;\">预订药</text></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\n\t\t<view class=\"view2\" v-show=\"showType=='大图' && showView=='view3'\" style=\"margin-top:100px\">\r\n\t\t\t\r\n\t\t\t<view v-for=\"(goods, i) in filteredSearchResultsList\" :key=\"i\" @click=\"toGoodsSellShop(goods)\" class=\"bigImg-box\">\r\n\t\t\t\t<!-- <goodsCard :goods=\"goods\" ></goodsCard> -->\r\n\t\t\t\t<goods-card2 :goods=\"goods\" ></goods-card2>\t\t\r\n\t\t\r\n\t\t\t</view>\r\n\t\t</view>\n\t\t\r\n\t\t<view style=\"position: fixed;z-index: 9999;top: 0;\">\r\n\t\t\t<uni-popup ref=\"popup\" type=\"right\" background-color=\"#fff\" >\r\n\t\t\t\t<view style=\"width: 70vw;padding: 5px;height: 80vh;\">\r\n\t\t\t\t\t<text style=\"font-weight: bold;\">生产厂商筛选</text>\r\n\t\t\t\t\t<view style=\"padding: 5px;display: flex;flex-wrap: wrap;overflow: auto;max-height: 40vh;\">\r\n\t\t\t\t\t\t<uni-tag   v-for=\"(item,i) in filterRule.manufacturer\" :key=\"i\" :text=\"item\" style=\"margin: 5px;\" @click=\"clickFilterRule(item,i,'生产厂商')\" :type=\"getTagType(item,'生产厂商')\"></uni-tag>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text style=\"font-weight: bold;\">品牌名筛选</text>\r\n\t\t\t\t\t<view style=\"padding: 5px;display: flex;flex-wrap: wrap;overflow: auto;max-height: 40vh;\">\r\n\t\t\t\t\t\t<uni-tag   v-for=\"(item,i) in filterRule.goodsName\" :key=\"i\" :text=\"item\" style=\"margin: 5px;\" @click=\"clickFilterRule(item,i,'品牌名')\" :type=\"getTagType(item,'品牌名')\"></uni-tag>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"filter-button-container\">\r\n\t\t\t\t\t<button type=\"primary\" @click=\"this.$refs.popup.close()\" size=\"mini\">确定</button>\r\n\t\t\t\t\t<button type=\"primary\" @click=\"resetFilterRule\" size=\"mini\">重置</button>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-popup>\r\n\t\t</view>\r\n\t\t\r\n\t\t\n\t</view>\n</template>\n\n<script>\n\timport goodsCard from '@/components/goods/goods_card.vue';\r\n\timport goodsCard2 from '@/components/goods/goods_card2.vue';\n\timport request from '@/common/api/request.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tshowType:'列表',//展示类型 列表/大图\n\t\t\t\thotList:[],\n\t\t\t\thistoryList:[],\n\t\t\t\tshowView:\"view1\",\n\t\t\t\tsearchContent:'',\n\t\t\t\tsearchResults:[],//搜索结果\r\n\t\t\t\tfilterSearchResults:[],//添加筛选条件后的结果\n\t\t\t\tsearchTime:1,//为1时证明为搜索而不是下拉加载数据\n\t\t\t\tisloding:true,\n\t\t\t\ttotalNum:'',//查询到的总数\n\t\t\t\tchoiceBar:\"test0\", //选择哪个排序条件\n\t\t\t\tsearchObj: {\n\t\t\t\t\tsearchContent: '', //商品查询名\n\t\t\t\t\tpageIndex: 1,\n\t\t\t\t\tpageSize: 20,\n\t\t\t\t\tdrugsList: [],\n\t\t\t\t\tsortRule:'默认',\n\t\t\t\t\tfilterRule:'无',//筛选条件\n\t\t\t\t},\r\n\t\t\t\tmaySearchList:[],\r\n\t\t\t\tfilterRule:{\r\n\t\t\t\t\tmanufacturer:[],\r\n\t\t\t\t\tgoodsName:[], //品牌名\r\n\t\t\t\t},//筛选条件\r\n\t\t\t\tuseFilterRule:{\r\n\t\t\t\t\tmanufacturer:[],\r\n\t\t\t\t\tgoodsName:[], //品牌名\r\n\t\t\t\t},//使用的筛选条件\r\n\t\t\t\tuseFilter:false,\r\n\t\t\t\tfocus:false,\r\n\t\t\t\tisCategorySearch:false, //是否是分类搜索标识\r\n\t\t\t\tcategoryId:'',\n\t\t\t}\n\t\t},\n\t\tcomponents:{goodsCard,goodsCard2},\n\t\twatch: {\n\t\t\tsearchContent(newVal, oldVal){\r\n\t\t\t\tif (newVal === '') {\r\n\t\t\t\t    this.showView = 'view1';\r\n\t\t\t\t} else if (newVal.length >= 1 && !/^[0-9a-z]*$/.test(newVal)) {\r\n\t\t\t\t    this.watchInput();\r\n\t\t\t\t}\n\t\t\t    \n\t\t\t}\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t\r\n\t\t},\r\n\t\t\n\t\tmounted() {\t\t\r\n\t\t\tthis.getHotGoods()\n\t\t\tthis.historyList = JSON.parse(uni.getStorageSync('historyList') || '[]');\n\t\t},\n\t\tonLoad: function (option) {\n\t\t\t//解析传过来的对象\r\n\t\t\tif (option && option.searchContent) {\r\n\t\t\t\tlet categoryId = JSON.parse(decodeURIComponent(option.searchContent));\r\n\t\t\t\tthis.isCategorySearch=true\r\n\t\t\t\tthis.categoryId = categoryId\r\n\t\t\t\tthis.categorySearchGoods(categoryId,'')\r\n\t\t\t\tconsole.log(this.searchContent)\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.focus = true\r\n\t\t\t}\r\n\t\t\t\n\t\t},\r\n\t\tcreated() {\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tfilteredSearchResultsList() {\r\n\t\t\t\tconsole.log(\"筛选执行\")\r\n\t\t\t  if(this.searchResults==[] || this.searchResults==null) return\r\n\t\t\t  if (this.useFilterRule.manufacturer.length == 0 && this.useFilterRule.goodsName.length == 0) {\t\t    \r\n\t\t\t    return this.searchResults\r\n\t\t\t  } else {\r\n\t\t\t\t  \r\n\t\t\t    \r\n\t\t\t        return this.searchResults.filter((goods) => {\r\n\t\t\t          const manufacturerMatch = this.useFilterRule.manufacturer.some(\r\n\t\t\t            (unit) => unit === goods.manufacturer\r\n\t\t\t          );\r\n\t\t\t          \r\n\t\t\t          const goodsNameMatch = this.useFilterRule.goodsName.some(\r\n\t\t\t            (name) => name === goods.goodsName\r\n\t\t\t          );\r\n\t\t\t\t\t  \r\n\t\t\t          if(this.useFilterRule.manufacturer.length == 0 ) return goodsNameMatch\r\n\t\t\t\t\t  else if(this.useFilterRule.goodsName.length == 0) return manufacturerMatch\r\n\t\t\t          else return manufacturerMatch || goodsNameMatch;\r\n\t\t\t        });\r\n\t\t\t\t\t\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t//前往预订药页面\r\n\t\t\ttoReserveGoods(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:'/pages/goods_order/goods_order'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//筛选中点击筛选条件\r\n\t\t\tclickFilterRule(item,index,type) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:'正在筛选',\r\n\t\t\t\t\ticon:'none'\r\n\t\t\t\t})\r\n\t\t\t\tif(type==\"生产厂商\"){\r\n\t\t\t\t\tconst useIndex = this.useFilterRule.manufacturer.findIndex(\r\n\t\t\t\t\t  (unit) => unit === item\r\n\t\t\t\t\t);\r\n\t\t\t\t\t  if (useIndex === -1) {\r\n\t\t\t\t\t    // 加入筛选\r\n\t\t\t\t\t    this.useFilterRule.manufacturer.push(item);\r\n\t\t\t\t\t  } else {\r\n\t\t\t\t\t    // 移除筛选\r\n\t\t\t\t\t    this.useFilterRule.manufacturer.splice(useIndex, 1);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t\r\n\t\t\t\t}else if(type==\"品牌名\"){\r\n\t\t\t\t\tconst useIndex = this.useFilterRule.goodsName.findIndex(\r\n\t\t\t\t\t  (unit) => unit === item\r\n\t\t\t\t\t);\r\n\t\t\t\t\t  if (useIndex === -1) {\r\n\t\t\t\t\t    // 加入筛选\r\n\t\t\t\t\t    this.useFilterRule.goodsName.push(item);\r\n\t\t\t\t\t  } else {\r\n\t\t\t\t\t    // 移除筛选\r\n\t\t\t\t\t    this.useFilterRule.goodsName.splice(useIndex, 1);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(this.useFilterRule.goodsName.length!=0 || this.useFilterRule.manufacturer.length!=0){\r\n\t\t\t\t\tthis.useFilter=true\r\n\t\t\t\t}  else this.useFilter=false\r\n\t\t\t\t\r\n\t\t\t\t// console.log(this.useFilterRule)  \r\n\t\t\t},\r\n\t\t\t//获取uni-tag样式类型\r\n\t\t\tgetTagType(item,type) {\r\n\t\t\t\tif(type==\"生产厂商\"){\r\n\t\t\t\t\tconst isSelected = this.useFilterRule.manufacturer.some(\r\n\t\t\t\t\t  (unit) => unit === item\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn  isSelected ? 'primary' : '';\r\n\t\t\t\t\t\r\n\t\t\t\t}else if(type==\"品牌名\"){\r\n\t\t\t\t\tconst isSelected = this.useFilterRule.goodsName.some(\r\n\t\t\t\t\t  (unit) => unit === item\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn  isSelected ? 'primary' : '';\r\n\t\t\t\t}\r\n\t\t  \r\n\t\t\t},\r\n\t\t\t//创建筛选条件\r\n\t\t\tcreatefilterRule(searchResults){\t\t\t\r\n\t\t\t\tconst uniqueManufacturer = new Set();\r\n\t\t\t\tconst uniqueGoodsName = new Set();\r\n\t\t\t\t      searchResults.forEach((goods) => {\r\n\t\t\t\t        uniqueManufacturer.add(goods.manufacturer);\r\n\t\t\t\t\t\tuniqueGoodsName.add(goods.goodsName);\r\n\t\t\t\t      });\r\n\t\t\t\t      this.filterRule.manufacturer = Array.from(uniqueManufacturer);\r\n\t\t\t\t      this.filterRule.goodsName = Array.from(uniqueGoodsName);    \r\n\t\t\t},\r\n\t\t\t//重置筛选 \r\n\t\t\tresetFilterRule(){\r\n\t\t\t\tthis.useFilterRule.manufacturer=[]\r\n\t\t\t\tthis.useFilterRule.goodsName=[]\r\n\t\t\t\tthis.filterSearchResults = this.searchResults\r\n\t\t\t\tthis.useFilter = false\r\n\t\t\t},\n\t\t\ttoGoodsSellShop(goods){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:\"/pages/shops_selling_This_goods/shops_selling_This_goods?goods=\"+encodeURIComponent(JSON.stringify(goods))\n\t\t\t\t\t//传对象参数给这个页面需要使用这个方法\n\t\t\t\t})\n\t\t\t},\n\t\t\tselectBar(num,sort){\r\n\t\t\t\tif(num!='test4')this.choiceBar=num\r\n\t\t\t\tif(num=='test3'){\r\n\t\t\t\t\tif(this.showType=='大图'){this.showType='列表'}\r\n\t\t\t\t\telse{this.showType='大图'}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.choiceBar=num\r\n\t\t\t\t\tvar sortRule = this.searchObj.sortRule\r\n\t\t\t\t}\n\t\t\t\tif(num!='test3'){\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: 0, // 将目标元素的选择器传递给 selector 属性\r\n\t\t\t\t\t\tduration: 300, // 滚动动画的时长，单位为 ms\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\n\t\t\t\tif(num=='test0') this.searchObj.sortRule='默认'\n\t\t\t\tif(num=='test1'&&sort=='price'){\n\t\t\t\t\tif(sortRule!='价格升序'||sortRule!='价格降序') this.searchObj.sortRule='价格降序'\n\t\t\t\t\tif(sortRule=='价格升序') this.searchObj.sortRule='价格降序'\n\t\t\t\t\tif(sortRule=='价格降序') this.searchObj.sortRule='价格升序'\n\t\t\t\t\tthis.sortSearchResults(this.searchObj.sortRule)\n\t\t\t\t\treturn\n\t\t\t\t} \n\t\t\t\tif(num=='test2'&&sort=='shopsNum'){\n\t\t\t\t\tif(sortRule!='报价数升序'||sortRule!='报价数降序') this.searchObj.sortRule='报价数降序'\n\t\t\t\t\tif(sortRule=='报价数升序') this.searchObj.sortRule='报价数降序'\n\t\t\t\t\tif(sortRule=='报价数降序') this.searchObj.sortRule='报价数升序'\n\t\t\t\t\tthis.sortSearchResults(this.searchObj.sortRule)\n\t\t\t\t\treturn\n\t\t\t\t} \n\t\t\t\t\r\n\t\t\t\tif(num=='test4') {\r\n\t\t\t\t\tthis.$refs.popup.open('right')\r\n\t\t\t\t}\r\n\t\t\t\t\n\t\t\t\tthis.sortSearchResults(this.searchObj.sortRule)\n\t\t\t\t\n\t\t\t},\n\t\t\tsortSearchResults(sortRule) {\n\t\t\t\tif(sortRule=='价格降序'){\n\t\t\t\t\t// 使用 Array.prototype.sort() 方法对 searchResults 进行排序\n\t\t\t\t\tconsole.log(sortRule)\n\t\t\t\t\tthis.searchResults.sort((a, b) => b.minPrice - a.minPrice);\n\t\t\t\t}\n\t\t\t    if(sortRule=='价格升序'){\n\t\t\t    \tthis.searchResults.sort((a, b) => a.minPrice - b.minPrice);\n\t\t\t    }\n\t\t\t\tif(sortRule=='默认'){\n\t\t\t\t\tthis.searchResults.sort((a, b) => b.similarity - a.similarity);\n\t\t\t\t}   \r\n\t\t\t\tif(sortRule=='报价数降序'){\r\n\t\t\t\t\t// 使用 Array.prototype.sort() 方法对 searchResults 进行排序\r\n\t\t\t\t\tconsole.log(sortRule)\r\n\t\t\t\t\tthis.searchResults.sort((a, b) => b.shopNum - a.shopNum);\r\n\t\t\t\t}\r\n\t\t\t\tif(sortRule=='报价数升序'){\r\n\t\t\t\t\tthis.searchResults.sort((a, b) => a.shopNum - b.shopNum);\r\n\t\t\t\t} \r\n\t\t\t\tthis.removeDuplicates()\r\n\t\t\t\t\n\t\t\t},\n\t\t\t//搜索商品\n\t\t\tasync searchGoods(name,type){\n\t\t\t\tthis.showView='view3'\r\n\t\t\t\t\r\n\t\t\t\tthis.isCategorySearch = false //每次正常查询都把分类查询标识设为false\r\n\t\t\t\tvar that = this\n\t\t\t\tlet searchContent1 = this.searchContent\n\t\t\t\tif(name!=''){//用于检验是否是点击热销或者历史搜索记录\n\t\t\t\t    console.log(\"热门/记录搜索\"+name)\n\t\t\t\t\tsearchContent1 = name\n\t\t\t\t\tthis.searchContent = name\r\n\t\t\t\t\tthis.resetFilterRule()\n\t\t\t\t}\r\n\t\t\t\tif(/^[0-9]*$/.test(this.searchContent)){//如果全为数字则是分类查询\r\n\t\t\t\t\tconsole.log(\"纯数字-分类查询\")\r\n\t\t\t\t\tthis.isCategorySearch = true\r\n\t\t\t\t\tthis.categoryId = this.searchContent\r\n\t\t\t\t\tawait this.categorySearchGoods(this.categoryId,'')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\n\t\t\t\tif(this.searchObj.searchContent!=searchContent1 ||searchContent1==''){\n\t\t\t\t\tthis.searchTime = 1\n\t\t\t\t\tthis.searchObj.pageIndex=1\n\t\t\t\t\tthis.searchObj.drugsList=[]\n\t\t\t\t\tthis.searchResults=[]\r\n\t\t\t\t\tthis.resetFilterRule()\n\t\t\t\t}else if (type!='loadMore' && this.searchContent!='' ){\r\n\t\t\t\t\t//搜索内容相同但是搜索类型不是加载更多的话就退出\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\n\t\t\t\tthis.saveSearchHistory(searchContent1);\n\t\t\t\tthis.resetFilterRule() //每次查询都重置筛选\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//保证只有第一次搜索时才有搜索中的提示，后续下拉加载更多数据不显示\n\t\t\t\tif (that.searchTime === 1) {\t\t\t\t\t\n\t\t\t\t\tconsole.log(that.searchTime);\n\t\t\t\t\tthat.searchTime = that.searchTime + 1\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '搜索中...'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthat.searchObj.searchContent=searchContent1\n\t\t\t\t\n\t\t\t\t//发起搜索请求\n\t\t\t\tconst url = '/api/goods/searchGoods';\n\t\t\t\tconst method = 'POST'; \n\t\t\t\tconst data = {\n\t\t\t\t\tsearchObj: that.searchObj,\n\t\t\t\t};\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await request('yzy_app', url, method, data);\n\t\t\t\t\tconsole.log(res);\t\t//统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\n\t\t\t\t\tif(res.code == 99){\n\t\t\t\t\t\t//能搜索到数据\n\t\t\t\t\t\tif (res.data.data !== null) {\n\t\t\t\t\t\t\tthis.searchResults = [...this.searchResults, ...res.data.data] //下拉加载更多数据 与旧数据连接\t\t\n\t\t\t\t\t\t\tthat.totalNum = res.data.totalCount\n\t\t\t\t\t\t\tthis.searchObj.drugsList = res.data.drugsList\n\t\t\t\t\t\t\tthis.showView='view3'\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.createfilterRule(this.searchResults)\t\t\t\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//不能搜索到数据\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.showView='view3'\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '没有找到该药品!',\r\n\t\t\t\t\t\t\t\ticon:'error',\r\n\t\t\t\t\t\t\t\tduration: 1200\r\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!res.data.drugsList.length==0)this.sortSearchResults('报价数降序')\t\r\n\t\t\t\t\t\telse\n\t\t\t\t\t\tthis.sortSearchResults(this.searchObj.sortRule)\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t},\r\n\t\t\t//分类搜索商品\r\n\t\t\tasync categorySearchGoods(id,type){\r\n\t\t\t\tthis.showView='view3'\r\n\t\t\t\tvar that = this\r\n\t\t\t\tlet searchContent1 = id\r\n\t\t\t\t\r\n\t\t\t\tif(this.searchObj.searchContent!=searchContent1 ||searchContent1==''){\r\n\t\t\t\t\tthis.searchTime = 1\r\n\t\t\t\t\tthis.searchObj.pageIndex=1\r\n\t\t\t\t\tthis.searchObj.drugsList=[]\r\n\t\t\t\t\tthis.searchResults=[]\r\n\t\t\t\t\tthis.resetFilterRule()\r\n\t\t\t\t}else if (type!='loadMore' && this.searchContent!='' ){\r\n\t\t\t\t\t//搜索内容相同但是搜索类型不是加载更多的话就退出\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tthis.resetFilterRule() //每次查询都重置筛选\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//保证只有第一次搜索时才有搜索中的提示，后续下拉加载更多数据不显示\r\n\t\t\t\tif (that.searchTime === 1) {\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(that.searchTime);\r\n\t\t\t\t\tthat.searchTime = that.searchTime + 1\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '搜索中...'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthat.searchObj.searchContent=searchContent1\r\n\t\t\t\t\r\n\t\t\t\t//发起搜索请求\r\n\t\t\t\tconst url = '/api/goods/searchGoods';\r\n\t\t\t\tconst method = 'POST'; \r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tsearchObj: that.searchObj,\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await request('yzy_app', url, method, data);\r\n\t\t\t\t\tconsole.log(res);\t\t//统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif(res.code == 99){\r\n\t\t\t\t\t\t//能搜索到数据\r\n\t\t\t\t\t\tif (res.data.data !== null) {\r\n\t\t\t\t\t\t\tthis.searchResults = [...this.searchResults, ...res.data.data] //下拉加载更多数据 与旧数据连接\t\t\r\n\t\t\t\t\t\t\tthat.totalNum = res.data.totalCount\r\n\t\t\t\t\t\t\tthis.searchObj.drugsList = res.data.drugsList\r\n\t\t\t\t\t\t\tthis.showView='view3'\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.createfilterRule(this.searchResults)\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//不能搜索到数据\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// this.showView='view1'\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '没有找到该药品!',\r\n\t\t\t\t\t\t\t\ticon:'error',\r\n\t\t\t\t\t\t\t\tduration: 1200\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!res.data.drugsList.length==0)this.sortSearchResults('报价数降序')\t\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.sortSearchResults(this.searchObj.sortRule)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 在适当的位置调用这个方法，来清除 this.searchResults 中的重复数据\r\n\t\t\tremoveDuplicates() {\r\n\t\t\t  const uniqueGoods = [];\r\n\t\t\t  \r\n\t\t\t  for (const item of this.searchResults) {\r\n\t\t\t    const exists = uniqueGoods.some(uniqueItem => uniqueItem.goodsId === item.goodsId);\r\n\t\t\t    if (!exists) {\r\n\t\t\t      uniqueGoods.push(item);\r\n\t\t\t    }\r\n\t\t\t  }\t\t\t  \r\n\t\t\t  this.searchResults = uniqueGoods;\r\n\t\t\t},\n\t\t\t//到达页面底部 触发加载更多内容\n\t\t\tonReachBottom() {\n\t\t\t\t//如果数据已经全部加载完毕\n\t\t\t\tif (this.searchObj.pageIndex * this.searchObj.pageSize >= this.totalNum) {\n\t\t\t\t\tconsole.log(\"数据加载完毕\")\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"数据加载完毕\",\n\t\t\t\t\t\ticon:\"success\"\n\t\t\t\t\t})\n\t\t\t\t\treturn \n\t\t\t\t}\n\t\t\t\tif (this.isloading) return\n\t\t\t\t// 让页码值自增+1\n\t\t\t\tthis.searchObj.pageIndex++\n\t\t\t\tconsole.log(\"到达底部\")\r\n\t\t\t\tif(this.isCategorySearch){\r\n\t\t\t\t\tthis.categorySearchGoods(this.categoryId,'loadMore')\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.searchGoods('','loadMore')\r\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t},\n\t\t\t// //存储搜索历史\n\t\t\tsaveSearchHistory(searchContent) {\n\t\t\t\tconsole.log('存储搜索历史')\n\t\t\t\t//历史搜索关键词进行去重排序\n\t\t\t\tconst set = new Set(this.historyList)\n\t\t\t\n\t\t\t\t// 使用正则表达式判断是否全为数字\r\n\t\t\t\tconst numericPattern = /^[0-9]+$/;\r\n\t\t\t\tif(numericPattern.test(searchContent)) return\n\t\t\t\tif (searchContent.trim().length !== 0) {\n\t\t\t\t\tset.delete(searchContent.trim())\n\t\t\t\t\tset.add(searchContent.trim())\n\t\t\t\t}\n\t\t\t\tlet ar = Array.from(set)\n\t\t\t\tif (ar.length > 8) {\n\t\t\t\t\tset.delete(ar[1])\n\t\t\t\t}\n\t\t\t\tthis.historyList = Array.from(set).reverse()\n\t\t\t\t// 对搜索历史数据，进行持久化的存储\n\t\t\t\tuni.setStorageSync('historyList', JSON.stringify(Array.from(set)))\n\t\t\t},\n\t\t\t//搜索推荐商品/热门商品\r\n\t\t\tasync getHotGoods(){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\tvar that = this\t\t\t\t\r\n\t\t\t\t//发起搜索请求\r\n\t\t\t\tconst url = '/api/goods/searchGoods';\r\n\t\t\t\tconst method = 'POST'; \r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tsearchObj: {\r\n\t\t\t\t\t\tsearchContent: '', //商品查询名\r\n\t\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\t\tpageSize: 20,\r\n\t\t\t\t\t\tdrugsList: [],\r\n\t\t\t\t\t\tsortRule:'默认',\r\n\t\t\t\t\t\tfilterRule:'无',//筛选条件\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res1 = await request('yzy_app', url, method, data);\r\n\t\t\t\t\t\t\t//统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tif(res1.code == 99){\r\n\t\t\t\t\t\t//能搜索到数据\r\n\t\t\t\t\t\tif (res1.data !== null) {\r\n\t\t\t\t\t\t\tthis.hotList = res1.data.data\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\t\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync getMaySearch(){\r\n\t\t\t\tconst url = '/api/goods/getMaySearch';\r\n\t\t\t\tconst method = 'POST'; \r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tsearchContent: this.searchContent\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await request('yzy_app', url, method, data);\t\t//统一格式：{\"data\":{}, \"flag\":99, \"result\":\"成功\"}\r\n\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\tif(response.code == 99){\r\n\t\t\t\t\t\tthis.maySearchList = response.data.data\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\n\t\t\t//监听输入框\n\t\t\twatchInput(){\t\t\n\t\t\t\tif(this.searchContent!=''){\n\t\t\t\t\tthis.showView = \"view2\"\r\n\t\t\t\t\tthis.getMaySearch()\n\t\t\t\t}else{\n\t\t\t\t\tthis.showView = \"view1\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tclearSearchContent(){\n\t\t\t\tthis.searchContent = ''\n\t\t\t\tthis.searchTime = 1\n\t\t\t\tthis.searchObj.pageIndex=1\n\t\t\t\tthis.searchObj.drugsList=[]\n\t\t\t},\n\t\t\tclearSearchResult(){\n\t\t\t\tthis.searchTime = 1\n\t\t\t\tthis.searchObj.pageIndex=1\n\t\t\t\tthis.searchObj.drugsList=[]\n\t\t\t\tthis.searchResults=[]\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\t.bt_contact{\r\n\t\tposition: absolute;\r\n\t\twidth: 10vw;\r\n\t\theight: 10vw;\r\n\t\tborder: 0;\r\n\t\ttop:0;\t\r\n\t\t\r\n\t}\t\r\n.bigImg-box{\r\n\tbackground: white;\r\n\twidth: 46%;\r\n\tmargin: auto;\r\n\tborder-radius: 15px;\r\n\tackground: white;\r\n\tpadding: 1vw;\r\n\tmargin-bottom: 10px;\r\n}\t\n.mini-text{\n\tfont-size: 13px;\n\tfont-weight: bold;\n\tfont-family: -webkit-pictograph;\n}\t\n.activeBar{\n\tborder-bottom: 4px #1296DB solid;\n}\n.choice-bar-container{\n\t background: #1296DB;\n\tdisplay: flex;\n\toverflow : auto;\n\tbackground: white;\r\n\tz-index: 9999;\n}\n.choice-bar-item-box {\n\theight: 100%;\n    width: 25vw;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 5px 0;\n} \t\n.icons{\n\twidth: 20px;\n\theight: 20px;\n\tdisplay: flex;\n}\t\n.view1{\n\tmargin: 60px 10px 10px 10px;\n}\r\n.view2{\r\n\tmargin-top: 100px;\r\n\tmin-height: 200px;\r\n\tborder-radius: 15px;\r\n\tmargin: 100px 2vw 2vw 2vw;\r\n\twidth: 96vw;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n}\n .search-container{\n\n\t  width: 100%;\n\t  \n\t display: flex;\n\t padding: 3vw;\n\t background: #1296DB;\n } \n .search-input {\n     display: flex;\n     align-items: center;\n     // justify-content: center;\n     border-radius: 24px;\n     width: 80vw;\n\t background: white;\n }\n .voice-icon{\n \t font-family: \"Material Icons\";\n \t font-size: 5vw;\n \t color: #9aa0a6;\n \t margin-left: 8px;\n \t line-height: 31px;\n }\r\n .line {\r\n\t margin: 2px;\r\n \theight: 1upx;\r\n \tbackground-color: #ccc;\r\n }\r\n.filter-button-container{\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t} \n.history-box {\n\tpadding: 0 5px;\n\n\t.history-title {\n\t\tdisplay: flex;\n\t\tjustify-content: baseline;\n\t\theight: 40px;\n\t\talign-items: center;\n\t\tfont-size: 15px;\n\t\tborder-bottom: 1px solid #efefef;\n\t}\n\n\t.history-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\n\t\tuni-tag {\n\t\t\tmargin-top: 15px;\n\t\t\tmargin-right: 5px;\n\t\t\tfont-size: 2rpx;\n\t\t}\n\t}\r\n\t\n}\r\npage{\r\n\t    background: #f3f3f3;\r\n}\n</style>\n","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}
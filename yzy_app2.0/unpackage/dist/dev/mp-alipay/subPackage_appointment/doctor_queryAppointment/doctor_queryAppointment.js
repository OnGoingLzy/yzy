(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["subPackage_appointment/doctor_queryAppointment/doctor_queryAppointment"],{431:function(t,e,n){"use strict";(function(t){var e=n(3);n(22);e(n(21));var o=e(n(432));my.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["createPage"])},432:function(t,e,n){"use strict";n.r(e);var o=n(433),r=n(435);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(437);var a,s=n(68),u=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);u.options.__file="subPackage_appointment/doctor_queryAppointment/doctor_queryAppointment.vue",e["default"]=u.exports},433:function(t,e,n){"use strict";n.r(e);var o=n(434);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},434:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=!1,a=[];r._withStripped=!0},435:function(t,e,n){"use strict";n.r(e);var o=n(436),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},436:function(t,e,n){"use strict";(function(t){var o=n(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(26)),i=o(n(28)),a=o(n(29)),s={data:function(){return{appointments:[],filterAppointments:[],showMore:"查看更多"}},onShow:function(){t.hideHomeButton(),this.checkUserPermissions()},methods:{toAuthorizePhone:function(){t.navigateTo({url:"/pages/login/login"})},appointmentFinished:function(e){var n=this;return(0,i.default)(r.default.mark((function o(){var i,s,u,c,p;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone"),type:"医生",appointmentId:e.id,origin_status:e.status,status:"已完成"},s="/api/appointment/updateAppointmentStatus",u="POST",c=i,o.prev=4,o.next=7,(0,a.default)("yzy_app",s,u,c);case 7:p=o.sent,console.log(p),99==p.data.flag?(t.showToast({title:"确认成功!",icon:"none",mask:!0,duration:1300}),n.getAppointment()):t.showToast({title:p.data.sm,icon:"none",mask:!0,duration:1300}),o.next=16;break;case 12:o.prev=12,o.t0=o["catch"](4),console.log(o.t0),t.showToast({title:"出错了",icon:"none",mask:!0,duration:1300});case 16:case"end":return o.stop()}}),o,null,[[4,12]])})))()},clickShowMore:function(){"查看更多"==this.showMore?(this.showMore="收起",this.filterData("ALL")):(this.showMore="查看更多",this.filterData("DEFAULT"))},filterData:function(t){"ALL"==t&&(this.filterAppointments=this.appointments),"DEFAULT"==t&&(this.filterAppointments=this.appointments.filter((function(t){return"待处理"===t.status})),console.log(this.filterAppointments),0==this.filterAppointments.length&&(this.filterAppointments=this.appointments))},getAppointment:function(){var e=this;return(0,i.default)(r.default.mark((function n(){var o,i,s,u,c,p;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showMore="查看更多",o=e,i={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone"),type:"医生"},s="/api/appointment/getAppointment",u="POST",c=i,n.prev=6,n.next=9,(0,a.default)("yzy_app",s,u,c);case 9:p=n.sent,console.log(p),99==p.data.flag&&(e.appointments=p.data.data,o.filterData("DEFAULT")),n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](6),console.log(n.t0),t.hideLoading();case 18:case"end":return n.stop()}}),n,null,[[6,14]])})))()},checkUserPermissions:function(){var e=this;return(0,i.default)(r.default.mark((function n(){var o,i,s,u,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.getStorageSync("phone")){n.next=3;break}return e.toAuthorizePhone(),n.abrupt("return");case 3:return o={openid:t.getStorageSync("openid"),phone:t.getStorageSync("phone")},i="/api/appointment/checkUserPermissions",s="POST",u=o,n.prev=7,n.next=10,(0,a.default)("yzy_app",i,s,u);case 10:c=n.sent,console.log(c),99==c.data.flag?e.getAppointment():(t.showToast({title:"您没有医生权限,准备跳转云找药",icon:"none"}),setTimeout((function(){t.reLaunch({url:"/pages/index/index"})}),1e3)),n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](7),console.log(n.t0),t.hideLoading();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()}}};e.default=s}).call(this,n(1)["default"])},437:function(t,e,n){"use strict";n.r(e);var o=n(438),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},438:function(t,e,n){}},[[431,"common/runtime","common/vendor"]]]);
(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/goods_order_search/goods_order_search"],{347:function(e,t,r){"use strict";(function(e){var t=r(3);r(22);t(r(21));var n=t(r(348));my.__webpack_require_UNI_MP_PLUGIN__=r,e(n.default)}).call(this,r(1)["createPage"])},348:function(e,t,r){"use strict";r.r(t);var n=r(349),a=r(351);for(var s in a)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(s);r(353);var o,i=r(68),c=Object(i["default"])(a["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);c.options.__file="pages/goods_order_search/goods_order_search.vue",t["default"]=c.exports},349:function(e,t,r){"use strict";r.r(t);var n=r(350);r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),r.d(t,"components",(function(){return n["components"]}))},350:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"render",(function(){return a})),r.d(t,"staticRenderFns",(function(){return o})),r.d(t,"recyclableRender",(function(){return s})),r.d(t,"components",(function(){return n}));var a=function(){var e=this,t=e.$createElement;e._self._c},s=!1,o=[];a._withStripped=!0},351:function(e,t,r){"use strict";r.r(t);var n=r(352),a=r.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},352:function(e,t,r){"use strict";(function(e){var n=r(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(26)),s=n(r(16)),o=n(r(28)),i=n(r(10)),c=function(){r.e("components/goods_order/goods_list/goods_list").then(function(){return resolve(r(661))}.bind(null,r)).catch(r.oe)},u={components:{goodsList:c},data:function(){return(0,i.default)({searchValue:"123123",show:this.showInit,showSync:!1,searchVal:this.searchValInit,isShowInit:!0,defS:JSON.parse(JSON.stringify(e.getStorageSync("dSv"))),reobj:{spcxm:"",pageIndex:1,pageSize:20,drugsList:[]},timer:null,kw:"",searchResults:[],historyList:[],isloading:!0,time:1,times:2,total:""},"show","")},onLoad:function(t){this.time=1,this.times=2,this.historyList=JSON.parse(e.getStorageSync("kw")||"[]"),this.kw=e.getStorageSync("kw")},methods:{getSearchList:function(){var t=this;return(0,o.default)(a.default.mark((function r(){var n,o,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(t.kw),n=t,n.kw.trim()&&0!==n.kw.length){r.next=5;break}return n.searchResults=[],r.abrupt("return");case 5:return console.log("测试用"+e.getStorageSync("dS").value),t.reobj.spcxm=e.getStorageSync("dS").value,1===n.time&&(console.log(n.time),n.time=n.time+1,e.showLoading({title:"搜索中..."})),e.$http.beforeRequest=function(e){-1!==e.url.indexOf("/api/SearchSpml")&&(e.header={"X-Ca-Key":"wxe7c826a1a5e00055","X-Service-Method":"SearchSpml"})},r.next=11,e.$http.post("/api/SearchSpml",t.reobj);case 11:if(o=r.sent,i=o.data,t.isloading=!1,99===i.result){r.next=16;break}return r.abrupt("return",e.$showMsg());case 16:null!==i.data?(t.searchResults=[].concat((0,s.default)(t.searchResults),(0,s.default)(i.data)),t.reobj.spdm=i.data.spdm,n.total=i.totalCount):e.navigateTo({url:"/pages/goods_order_warning/goods_order_warning"});case 17:case"end":return r.stop()}}),r)})))()},getSearchList2:function(){var t=this;return(0,o.default)(a.default.mark((function r(){var n,o,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log("测试2"),n=t,n.kw.trim()&&0!==n.kw.length){r.next=5;break}return n.searchResults=[],r.abrupt("return");case 5:return t.reobj.drugsList=e.getStorageSync("dS").drugsList,t.reobj.spcxm=e.getStorageSync("dS").spcxm,1===n.time&&(console.log(n.time),n.time=n.time+1,e.showLoading({title:"搜索中..."})),e.$http.beforeRequest=function(e){-1!==e.url.indexOf("/api/SearchSpml")&&(e.header={"X-Ca-Key":"wxe7c826a1a5e00055","X-Service-Method":"SearchSpml"})},r.next=11,e.$http.post("/api/SearchSpml",t.reobj);case 11:if(o=r.sent,i=o.data,t.isloading=!1,99===i.result){r.next=16;break}return r.abrupt("return",e.$showMsg());case 16:null!==i.data?(t.searchResults=[].concat((0,s.default)(t.searchResults),(0,s.default)(i.data)),t.reobj.spcxm=i.data.spdm,n.total=i.totalCount):e.navigateTo({url:"/pages/goods_order_warning/goods_order_warning"});case 17:case"end":return r.stop()}}),r)})))()},getSpdmList:function(){var t=this;if(t.kw.trim()&&0!==t.kw.length){1===t.time&&(console.log(t.time),t.time=t.time+1,e.showLoading({title:"搜索中..."})),this.reobj.spcxm=e.getStorageSync("dS").spcxm;var r=this.reobj.spcxm;console.log("当前查询商品:"+r),this.getSearchList3()}else t.searchResults=[]},getSearchList3:function(){var t=this;return(0,o.default)(a.default.mark((function r(){var n,o,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log("测试3"),n=t,n.kw.trim()&&0!==n.kw.length){r.next=5;break}return n.searchResults=[],r.abrupt("return");case 5:return t.reobj.spcxm=e.getStorageSync("dS").spcxm,t.reobj.spcxm,e.$http.beforeRequest=function(e){console.log("searchSpml"),-1!==e.url.indexOf("/api/SearchSpml")&&(e.header={"X-Ca-Key":"wxe7c826a1a5e00055","X-Service-Method":"SearchSpml"})},r.next=10,e.$http.post("/api/SearchSpml",t.reobj);case 10:if(o=r.sent,i=o.data,t.isloading=!1,99===i.result){r.next=15;break}return r.abrupt("return",e.$showMsg());case 15:null!==i.data?(t.searchResults=[].concat((0,s.default)(t.searchResults),(0,s.default)(i.data)),t.reobj.spdm=i.data.spdm,n.total=i.totalCount,t.reobj.drugsList=i.drugsList):e.navigateTo({url:"/pages/goods_order_warning/goods_order_warning"});case 16:case"end":return r.stop()}}),r)})))()},onReachBottom:function(){if(this.show="正在加载中...",this.reobj.pageIndex*this.reobj.pageSize>=this.total)return this.show="",2==this.times?(this.times=1,e.$showMsg("数据加载完毕!")):void 0;this.isloading||(this.reobj.pageIndex++,console.log("到达底部"),this.getSearchList3())},gotoDetail:function(t){e.navigateTo({url:"/pages/goods_order_detail/goods_order_detail?spdm="+t.spdm})}},mounted:function(){this.getSpdmList()}};t.default=u}).call(this,r(1)["default"])},353:function(e,t,r){"use strict";r.r(t);var n=r(354),a=r.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},354:function(e,t,r){}},[[347,"common/runtime","common/vendor"]]]);